
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>domonic.dom &#8212; domonic 0.7.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for domonic.dom</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    domonic.dom</span>
<span class="sd">    ====================================</span>
<span class="sd">    The DOM represents a document with a logical tree.</span>
<span class="sd">    https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c1"># List, Dict, Any, Union, Optional, Callable, Tuple</span>

<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">domonic.events</span> <span class="kn">import</span> <span class="n">Event</span><span class="p">,</span> <span class="n">EventTarget</span><span class="p">,</span> <span class="n">MouseEvent</span>  <span class="c1"># , KeyboardEvent, TouchEvent, UIEvent, CustomEvent</span>
<span class="kn">from</span> <span class="nn">domonic.style</span> <span class="kn">import</span> <span class="n">CSSStyleDeclaration</span> <span class="k">as</span> <span class="n">Style</span>
<span class="kn">from</span> <span class="nn">domonic.geom</span> <span class="kn">import</span> <span class="n">vec3</span>

<span class="kn">from</span> <span class="nn">domonic.webapi.url</span> <span class="kn">import</span> <span class="n">URL</span>
<span class="kn">from</span> <span class="nn">domonic.webapi.console</span> <span class="kn">import</span> <span class="n">Console</span>  <span class="c1"># left here for legacy reasons. access via window module instead</span>


<div class="viewcode-block" id="Node"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node">[docs]</a><span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="n">EventTarget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; An abstract base class upon which many other DOM API objects are based &quot;&quot;&quot;</span>

    <span class="n">ELEMENT_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">TEXT_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">CDATA_SECTION_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">PROCESSING_INSTRUCTION_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">COMMENT_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">DOCUMENT_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">DOCUMENT_TYPE_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">DOCUMENT_FRAGMENT_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">11</span>

    <span class="n">DOCUMENT_POSITION_DISCONNECTED</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">DOCUMENT_POSITION_PRECEDING</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">DOCUMENT_POSITION_FOLLOWING</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">DOCUMENT_POSITION_CONTAINS</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">DOCUMENT_POSITION_CONTAINED_BY</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="n">DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">32</span>

    <span class="c1"># The following constants have been deprecated and should not be used anymore.</span>
    <span class="n">ATTRIBUTE_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">ENTITY_REFERENCE_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">ENTITY_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">NOTATION_NODE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span>

    <span class="c1"># TODO - merge with html.tags</span>
    <span class="c1"># __slots__ = [&#39;args&#39;, &#39;baseURI&#39;, &#39;isConnected&#39;, &#39;namespaceURI&#39;, &#39;outerText&#39;, &#39;parentNode&#39;, &#39;prefix&#39;]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">baseURI</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;eventual.technology&#39;</span>  <span class="c1"># TODO - if ownerdocument has a basetag, use that</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isConnected</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/1999/xhtml&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outerText</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># üóëÔ∏è</span>
        <span class="c1"># self.baseURIObject = None  # ?</span>
        <span class="c1"># self.nodePrincipal = None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parents</span><span class="p">()</span>

        <span class="c1"># attempt to set init namespaceURI based on the tag name</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootNode</span>
            <span class="c1"># print(n)</span>
            <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;html&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">=</span> <span class="s1">&#39;http://www.w3.org/1999/xhtml&#39;</span>
            <span class="k">elif</span> <span class="n">n</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;svg&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">=</span> <span class="s1">&#39;http://www.w3.org/2000/svg&#39;</span>
            <span class="k">elif</span> <span class="n">n</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;xhtml&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">=</span> <span class="s1">&#39;http://www.w3.org/1999/xhtml&#39;</span>
            <span class="k">elif</span> <span class="n">n</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;xml&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">=</span> <span class="s1">&#39;http://www.w3.org/XML/1998/namespace&#39;</span>
            <span class="k">elif</span> <span class="n">n</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;xlink&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">=</span> <span class="s1">&#39;http://www.w3.org/1999/xlink&#39;</span>
            <span class="k">elif</span> <span class="n">n</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;math&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">=</span> <span class="s1">&#39;http://www.w3.org/1998/Math/MathML&#39;</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(&#39;nope!&#39;, e)</span>
            <span class="k">pass</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># print(name, value)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;args&quot;</span><span class="p">:</span>
                <span class="nb">super</span><span class="p">(</span><span class="n">Node</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_parents</span><span class="p">()</span>
                <span class="k">return</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Node</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="c1"># def __getattr__(self, name):</span>
    <span class="c1">#     # print(name)</span>
    <span class="c1">#     try:</span>
    <span class="c1">#         if name == &quot;args&quot;:</span>
    <span class="c1">#             return super(Node, self).__getattr__(name)</span>
    <span class="c1">#     except Exception as e:</span>
    <span class="c1">#         print(e)</span>
    <span class="c1">#     return super(Node, self).__getattr__(name)</span>

    <span class="c1"># def __getattribute__(self, name):</span>
        <span class="c1"># print(&#39;how are you doing today&#39;, name)</span>
        <span class="c1"># try:</span>
        <span class="c1">#     if name == &quot;args&quot;:</span>
        <span class="c1">#         return super(Node, self).__getattribute__(name)</span>
        <span class="c1"># except Exception as e:</span>
        <span class="c1">#     print(e)</span>
        <span class="c1"># check if its a property on the class</span>
        <span class="c1"># if name in self.__dict__:</span>
            <span class="c1"># return super(Node, self).__getattribute__(name)</span>
        <span class="c1"># return super(Node, self).__getattribute__(name)</span>
        <span class="c1"># return self.__dict__[item]</span>

<span class="c1"># def __getattr__(self, attrName):</span>
        <span class="c1"># if name not in self.__dict__:</span>
        <span class="c1">#     value = self.fetchAttr(name)    # computes the value</span>
        <span class="c1">#     self.__dict__[name] = value</span>
        <span class="c1"># return self.__dict__[name]</span>

    <span class="c1"># TODO - html.tag class currently has the required method as its called there.</span>
    <span class="c1"># def __getitem__(self, item):</span>
    <span class="c1">#     print(&#39;GET ITEM CALLED&#39;)</span>
    <span class="c1">#     if isinstance(item, int):</span>
    <span class="c1">#         return self.childNodes[item]</span>
    <span class="c1">#     if isinstance(item, str):</span>
    <span class="c1">#         # call props on self</span>
    <span class="c1">#         print(&#39;sup!&#39;)</span>
    <span class="c1">#         try:</span>
    <span class="c1">#             return self.__dict__[item]</span>
    <span class="c1">#         except Exception as e:</span>
    <span class="c1">#             print(e)</span>
    <span class="c1">#             # return None</span>
    <span class="c1">#     return super(Node, self).__getitem__(item)</span>

    <span class="k">def</span> <span class="nf">_update_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; private. - TODO &lt; check these docstrings don&#39;t export in docs</span>
<span class="sd">        loops all children and sets self as parent.</span>
<span class="sd">        cant do as decorator for now as that seems to breaks potential for json serialisation (see Style)</span>
<span class="sd">        so will have to call manually whenever self.args are ammended.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># print(self.args)</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
                <span class="k">if</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">set</span><span class="p">]):</span>
                    <span class="n">el</span><span class="o">.</span><span class="n">parentNode</span> <span class="o">=</span> <span class="bp">self</span>
                    <span class="n">el</span><span class="o">.</span><span class="n">_update_parents</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;unable to update parent&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_iterate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        private.</span>
<span class="sd">        currently used for querySelector</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># from domonic.javascript import Array</span>
        <span class="c1"># nodes = Array()</span>
        <span class="c1"># nodes.push(element)</span>
        <span class="c1"># while len(nodes) &gt; 0:</span>
        <span class="c1">#     element = nodes.shift()</span>
        <span class="c1">#     callback(element)</span>
        <span class="c1">#     nodes.unshift(*element.children)</span>
        <span class="n">nodes</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">callback</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">children</span><span class="p">)</span>

<div class="viewcode-block" id="Node.appendChild"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.appendChild">[docs]</a>    <span class="k">def</span> <span class="nf">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Adds a new child node, to an element, as the last child node &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+</span> <span class="p">(</span><span class="n">item</span><span class="p">,)</span></div>
        <span class="c1"># return item  # causes max recursion when called chained</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">childElementCount</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the number of child elements an element has &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">childNodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;NodeList&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns a live NodeList containing all the children of this node &quot;&quot;&quot;</span>
        <span class="c1"># return list(self.args)</span>
        <span class="k">return</span> <span class="n">NodeList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a collection of an element&#39;s child element (excluding text and comment nodes) &quot;&quot;&quot;</span>
        <span class="n">newlist</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">each</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">newlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">each</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newlist</span>

<div class="viewcode-block" id="Node.compareDocumentPosition"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.compareDocumentPosition">[docs]</a>    <span class="k">def</span> <span class="nf">compareDocumentPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">otherElement</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns a bitmask indicating the position of the other element relative to this element &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">otherElement</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">otherElement</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">compareDocumentPosition</span><span class="p">(</span><span class="n">otherElement</span><span class="o">.</span><span class="n">parentNode</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Node.contains"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.contains">[docs]</a>    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Check whether a node is a descendant of a given node &quot;&quot;&quot;</span>
        <span class="c1"># this will go crunch on big stuff... need to consider best way</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">each</span> <span class="o">==</span> <span class="n">node</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">each</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># TODO - dont iterate strings</span>

        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">firstChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the first child node of an element &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># TODO - check if this means includes content</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="Node.hasChildNodes"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.hasChildNodes">[docs]</a>    <span class="k">def</span> <span class="nf">hasChildNodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns true if an element has any child nodes, otherwise false &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lastChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the last child node of an element &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">localName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagName</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodeName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the name of a node &quot;&quot;&quot;</span>
        <span class="c1"># TODO - not sure what&#39;s better this or overriding on every element</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Element</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagName</span>  <span class="c1"># .upper()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Text</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;#text&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Comment</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;#comment&#39;</span>
        <span class="c1"># elif isinstance(self, DocumentType):</span>
        <span class="c1">#     return &#39;#doctype&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Document</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;#document&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CDATASection</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;#cdata-section&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">DocumentFragment</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;#document-fragment&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Attr</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ProcessingInstruction</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">DocumentType</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagName</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># @property</span>
    <span class="c1"># def nodeType(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns the node type of a node &quot;&quot;&quot;</span>
    <span class="c1">#     return self.ELEMENT_NODE</span>
    <span class="n">nodeType</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">ELEMENT_NODE</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the value of a node &quot;&quot;&quot;</span>
        <span class="n">outp</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">each</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">outp</span> <span class="o">=</span> <span class="n">outp</span> <span class="o">+</span> <span class="n">each</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">each</span><span class="o">.</span><span class="n">nodeValue</span>
                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">outp</span> <span class="o">=</span> <span class="n">outp</span> <span class="o">+</span> <span class="n">val</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">outp</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">outp</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">outp</span>

    <span class="nd">@nodeValue</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nodeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the value of a node &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">content</span><span class="p">,)</span>
        <span class="k">return</span> <span class="n">content</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ownerDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the root element (document object) for an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootNode</span>

    <span class="nd">@ownerDocument</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">ownerDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newOwner</span><span class="p">):</span>  <span class="c1">#: Element):</span>
        <span class="c1"># self.rootNode = newOwner # NOTE - you can&#39;t set rootNode it&#39;s property that calcs it</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rootNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[read-only property returns a Node object representing the topmost node in the tree,</span>
<span class="sd">        or the current node if it&#39;s the topmost node in the tree]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [Node]: [the topmost Node in the tree]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Document</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span>

        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">nxt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span>
        <span class="k">while</span> <span class="n">nxt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">nxt</span>
            <span class="n">nxt</span> <span class="o">=</span> <span class="n">nxt</span><span class="o">.</span><span class="n">parentNode</span>
        <span class="k">return</span> <span class="n">node</span>

<div class="viewcode-block" id="Node.insertBefore"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.insertBefore">[docs]</a>    <span class="k">def</span> <span class="nf">insertBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_node</span><span class="p">,</span> <span class="n">reference_node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; inserts a node before a reference node as a child of a specified parent node. &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">each</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">each</span> <span class="o">==</span> <span class="n">reference_node</span><span class="p">:</span>
                <span class="n">replace_args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
                <span class="n">replace_args</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">new_node</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">replace_args</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">new_node</span>
        <span class="k">return</span> <span class="n">new_node</span></div>

<div class="viewcode-block" id="Node.removeChild"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.removeChild">[docs]</a>    <span class="k">def</span> <span class="nf">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; removes a child node from the DOM and returns the removed node.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">each</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">each</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">each</span> <span class="o">==</span> <span class="n">node</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">node</span>
                <span class="n">n</span><span class="o">.</span><span class="n">parentNode</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">replace_args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
                <span class="n">replace_args</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">replace_args</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">n</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">each</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">r</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">r</span>

        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Node.replaceChild"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.replaceChild">[docs]</a>    <span class="k">def</span> <span class="nf">replaceChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newChild</span><span class="p">,</span> <span class="n">oldChild</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Replaces a child node within the given (parent) node.]</span>

<span class="sd">        Args:</span>
<span class="sd">            newChild ([type]): [a Node object]</span>
<span class="sd">            oldChild ([type]): [a Node object]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [the old child node]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">each</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">each</span> <span class="o">==</span> <span class="n">oldChild</span><span class="p">:</span>
                <span class="n">replace_args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
                <span class="n">replace_args</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="n">newChild</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">replace_args</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">oldChild</span>
        <span class="k">return</span> <span class="n">oldChild</span></div>
        <span class="c1"># for count, each in enumerate(self.args):</span>
        <span class="c1">#     if each == oldChild:</span>
        <span class="c1">#         n = oldChild</span>
        <span class="c1">#         self.removeChild(newChild)  # doc remove child?</span>
        <span class="c1">#         list(self.args).remove(oldChild)</span>
        <span class="c1">#         list(self.args).insert(count, newChild)</span>
        <span class="c1">#         return n</span>

        <span class="c1">#     r = each.replaceChild(newChild, oldChild)</span>
        <span class="c1">#     if r:</span>
        <span class="c1">#         return r</span>

        <span class="c1"># return None</span>

<div class="viewcode-block" id="Node.cloneNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.cloneNode">[docs]</a>    <span class="k">def</span> <span class="nf">cloneNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deep</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a copy. &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="n">deep</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># shallow copy</span></div>

<div class="viewcode-block" id="Node.isSameNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.isSameNode">[docs]</a>    <span class="k">def</span> <span class="nf">isSameNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks if two elements are the same node &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="n">node</span><span class="p">)</span></div>

<div class="viewcode-block" id="Node.isEqualNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.isEqualNode">[docs]</a>    <span class="k">def</span> <span class="nf">isEqualNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks if two elements are equal &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">getRootNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># if options is not None:</span>
        <span class="c1"># if options[&#39;composed&#39;] = True:</span>
        <span class="c1"># TODO - need to implement composed</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rootNode</span>

<div class="viewcode-block" id="Node.isDefaultNamespace"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.isDefaultNamespace">[docs]</a>    <span class="k">def</span> <span class="nf">isDefaultNamespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ns</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Checks if a namespace is the default namespace &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ns</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Node.lookupNamespaceURI"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.lookupNamespaceURI">[docs]</a>    <span class="k">def</span> <span class="nf">lookupNamespaceURI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ns</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the namespace URI for a given prefix</span>

<span class="sd">        :param ns: prefix - i.e &#39;xml&#39;, &#39;xlink&#39;, &#39;svg&#39;, etc</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">domonic.constants</span> <span class="kn">import</span> <span class="n">namespaces</span>
        <span class="k">if</span> <span class="n">ns</span> <span class="ow">in</span> <span class="n">namespaces</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">namespaces</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Node.lookupPrefix"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.lookupPrefix">[docs]</a>    <span class="k">def</span> <span class="nf">lookupPrefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ns</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the prefix for a given namespace URI &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ns</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaceURI</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[returns the next sibling of the current node.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

<div class="viewcode-block" id="Node.normalize"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Node.normalize">[docs]</a>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Normalize a node&#39;s value &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">previousSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[returns the previous sibling of the current node.]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">textContent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the text content of a node and its descendants &quot;&quot;&quot;</span>
        <span class="c1"># TODO - test- also check difference to nodeValue</span>
        <span class="c1"># nodevalue is lvl 1 spec. textcontent is lvl 3 spec.</span>
        <span class="n">outp</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">each</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">outp</span> <span class="o">=</span> <span class="n">outp</span> <span class="o">+</span> <span class="n">each</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">each</span><span class="o">.</span><span class="n">textContent</span>
                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">outp</span> <span class="o">=</span> <span class="n">outp</span> <span class="o">+</span> <span class="n">val</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">outp</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">outp</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">outp</span>

    <span class="nd">@textContent</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">textContent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the text content of a node and its descendants &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">content</span><span class="p">,)</span>
        <span class="k">return</span> <span class="n">content</span></div>

    <span class="c1"># def isSupported(self): return False #  üóë</span>
    <span class="c1"># getUserData() üóëÔ∏è</span>
    <span class="c1"># setUserData() üóëÔ∏è</span>


<div class="viewcode-block" id="ParentNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ParentNode">[docs]</a><span class="k">class</span> <span class="nc">ParentNode</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; not tested yet &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># @property</span>
    <span class="c1"># def childElementCount(self):</span>
    <span class="c1">#     return len(self.args)</span>

    <span class="c1"># @property</span>
    <span class="c1"># def children(self):</span>
    <span class="c1">#     return self.args</span>

    <span class="c1"># @property</span>
    <span class="c1"># def firstElementChild(self):</span>
    <span class="c1">#     raise NotImplementedError</span>

    <span class="c1"># @property</span>
    <span class="c1"># def lastElementChild(self):</span>
    <span class="c1">#     raise NotImplementedError</span>

    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+=</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">prepend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">replaceChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">children</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">children</span></div>


<div class="viewcode-block" id="ChildNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ChildNode">[docs]</a><span class="k">class</span> <span class="nc">ChildNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; not tested yet &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ChildNode.remove"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ChildNode.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes this ChildNode from the children list of its parent. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="ChildNode.replaceWith"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ChildNode.replaceWith">[docs]</a>    <span class="k">def</span> <span class="nf">replaceWith</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newChild</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Replaces this ChildNode with a new one. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">replaceChild</span><span class="p">(</span><span class="n">newChild</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="ChildNode.before"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ChildNode.before">[docs]</a>    <span class="k">def</span> <span class="nf">before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newChild</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts a newChild node immediately before this ChildNode. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">newChild</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="ChildNode.after"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ChildNode.after">[docs]</a>    <span class="k">def</span> <span class="nf">after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newChild</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts a newChild node immediately after this ChildNode. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">newChild</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div></div>


<div class="viewcode-block" id="Attr"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Attr">[docs]</a><span class="k">class</span> <span class="nc">Attr</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="c1"># https://developer.mozilla.org/en-US/docs/Web/API/Attr</span>

    <span class="n">nodeType</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">ATTRIBUTE_NODE</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># self.nodeType: int = Node.ATTRIBUTE_NODE</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">isId</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

<div class="viewcode-block" id="Attr.getNamedItem"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Attr.getNamedItem">[docs]</a>    <span class="k">def</span> <span class="nf">getNamedItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a specified attribute node from a NamedNodeMap &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">item</span>
        <span class="k">return</span> <span class="kc">None</span></div>

    <span class="c1"># def __getitem__(self, name):</span>
    <span class="c1">#     return self.getNamedItem(name)</span>

    <span class="c1"># def __setitem__(self, name, value):</span>
    <span class="c1">#     self.setNamedItem(name, value)</span>

<div class="viewcode-block" id="Attr.removeNamedItem"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Attr.removeNamedItem">[docs]</a>    <span class="k">def</span> <span class="nf">removeNamedItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Removes a specified attribute node &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">removeAttribute</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Attr.setNamedItem"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Attr.setNamedItem">[docs]</a>    <span class="k">def</span> <span class="nf">setNamedItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Sets the specified attribute node (by name) &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">attributes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>


<span class="c1"># from xml.dom.minidom import Attr</span>
<span class="kn">from</span> <span class="nn">xml.dom.minidom</span> <span class="kn">import</span> <span class="n">NamedNodeMap</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">class NamedNodeMap(object):</span>
<span class="sd">    &quot;&quot;&quot; TODO - not tested yet. </span>

<span class="sd">    a live object that represents a list of nodes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="sd">    def __init__(self, parentNode=None, *args, **kwargs):</span>
<span class="sd">        self.parentNode = parentNode</span>
<span class="sd">        self.args = args</span>
<span class="sd">        self.kwargs = kwargs</span>
<span class="sd">        super().__init__(*args, **kwargs)</span>

<span class="sd">    def getNamedItem(self, name):</span>
<span class="sd">        &quot;&quot;&quot; Returns a specified attribute node from a NamedNodeMap &quot;&quot;&quot;</span>
<span class="sd">        for item in self.args:</span>
<span class="sd">            if item.name == name:</span>
<span class="sd">                return item</span>
<span class="sd">        return None</span>

<span class="sd">    def __getitem__(self, name):</span>
<span class="sd">        print(&#39;getting:&#39;, name)</span>
<span class="sd">        # return self.getNamedItem(name)</span>
<span class="sd">        return self.parentNode.kwargs[&#39;_&#39; + name]</span>

<span class="sd">    def setNamedItem(self, name, value):</span>
<span class="sd">        &quot;&quot;&quot; Replaces, or adds, the Attr identified in the map by the given name.&quot;&quot;&quot;</span>
<span class="sd">        # if exists replace it otherwise add it</span>
<span class="sd">        has_item = False</span>
<span class="sd">        for item in self.args:</span>
<span class="sd">            if item.name == name:</span>
<span class="sd">                item.value = value</span>
<span class="sd">                has_item = True</span>
<span class="sd">                # return True</span>
<span class="sd">        if not has_item:</span>
<span class="sd">            self.args.append(Attr(name, value))</span>

<span class="sd">        self.parentNode.kwargs[&#39;_&#39; + name] = value</span>
<span class="sd">        return True</span>

<span class="sd">    def __setitem__(self, name: str, value):</span>
<span class="sd">        self.setNamedItem(name, value)</span>

<span class="sd">    def removeNamedItem(self, name: str):</span>
<span class="sd">        &quot;&quot;&quot; Removes a specified attribute node &quot;&quot;&quot;</span>
<span class="sd">        for item in self.args:</span>
<span class="sd">            if item.name == name:</span>
<span class="sd">                self.remove(item)</span>
<span class="sd">                return True</span>
<span class="sd">        return False</span>

<span class="sd">    def item(self, index):</span>
<span class="sd">        &quot;&quot;&quot; Returns the index&#39;th item in the collection &quot;&quot;&quot;</span>
<span class="sd">        return self.args[index]</span>

<span class="sd">    def getNameItemNS(self, namespaceURI: str, localName: str):</span>
<span class="sd">        &quot;&quot;&quot; Returns a specified attribute node from a NamedNodeMap &quot;&quot;&quot;</span>
<span class="sd">        for item in self.args:</span>
<span class="sd">            if item.namespaceURI == namespaceURI and item.localName == localName:</span>
<span class="sd">                return item</span>
<span class="sd">        return None</span>

<span class="sd">    def setNamedItemNS(self, namespaceURI: str, localName: str, value):</span>
<span class="sd">        &quot;&quot;&quot; Sets the specified attribute node (by name) &quot;&quot;&quot;</span>
<span class="sd">        for item in self.args:</span>
<span class="sd">            if item.namespaceURI == namespaceURI and item.localName == localName:</span>
<span class="sd">                item.value = value</span>
<span class="sd">                return True</span>
<span class="sd">        return False</span>

<span class="sd">    def removeNamedItemNS(self, namespaceURI: str, localName: str) -&gt; bool:</span>
<span class="sd">        &quot;&quot;&quot; Removes a specified attribute node &quot;&quot;&quot;</span>
<span class="sd">        for item in self.args:</span>
<span class="sd">            if item.namespaceURI == namespaceURI and item.localName == localName:</span>
<span class="sd">                self.remove(item)  # TODO - check this? where is remove?</span>
<span class="sd">                return True</span>
<span class="sd">        return False</span>
<span class="sd">&#39;&#39;&#39;</span>


<div class="viewcode-block" id="DOMStringMap"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMStringMap">[docs]</a><span class="k">class</span> <span class="nc">DOMStringMap</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    TODO - not tested yet</span>
<span class="sd">    TODO - make this like a dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="DOMStringMap.get"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMStringMap.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the item with the specified name &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="n">value</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="DOMStringMap.set"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMStringMap.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the value of the item with the specified name &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DOMStringMap.delete"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMStringMap.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Deletes the item with the specified name &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>

    <span class="c1"># def has(self, name):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns true if the specified name exists &quot;&quot;&quot;</span>
    <span class="c1">#     for item in self.args:</span>
    <span class="c1">#         if item.name == name:</span>
    <span class="c1">#             return True</span>
    <span class="c1">#     return False</span>

    <span class="c1"># def clear(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Removes all items from the map &quot;&quot;&quot;</span>
    <span class="c1">#     self.args = []</span>
    <span class="c1">#     return True</span>

    <span class="c1"># def keys(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns an array of all the names in the map &quot;&quot;&quot;</span>
    <span class="c1">#     return [item.name for item in self.args]</span>

    <span class="c1"># def values(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns an array of all the values in the map &quot;&quot;&quot;</span>
    <span class="c1">#     return [item.value for item in self.args]</span>


<div class="viewcode-block" id="DOMTokenList"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMTokenList">[docs]</a><span class="k">class</span> <span class="nc">DOMTokenList</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; TODO - not tested yet &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="DOMTokenList.add"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMTokenList.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Adds the given tokens to the list &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DOMTokenList.remove"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMTokenList.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Removes the given tokens from the list &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DOMTokenList.toggle"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMTokenList.toggle">[docs]</a>    <span class="k">def</span> <span class="nf">toggle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">force</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; If force is not given, removes token from list if present,</span>
<span class="sd">        otherwise adds token to list. If force is true, adds token to list,</span>
<span class="sd">        and if force is false, removes token from list if present. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">force</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">force</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">force</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;force must be a boolean&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="DOMTokenList.contains"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMTokenList.contains">[docs]</a>    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns true if the token is in the list, and false otherwise &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DOMTokenList.item"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMTokenList.item">[docs]</a>    <span class="k">def</span> <span class="nf">item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the token at the specified index &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="DOMTokenList.toString"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMTokenList.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns a string containing all tokens in the list, with spaces separating each token &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ShadowRoot"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ShadowRoot">[docs]</a><span class="k">class</span> <span class="nc">ShadowRoot</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>  <span class="c1"># TODO - this may need to extend tag also to get the args/kwargs</span>
    <span class="sd">&quot;&quot;&quot; property on element that has hidden DOM &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;open&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delegatesFocus</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>

<div class="viewcode-block" id="ShadowRoot.getSelection"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ShadowRoot.getSelection">[docs]</a>    <span class="k">def</span> <span class="nf">getSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a Selection object representing the range of text selected by the user,</span>
<span class="sd">        or the current position of the caret.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="ShadowRoot.elementFromPoint"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ShadowRoot.elementFromPoint">[docs]</a>    <span class="k">def</span> <span class="nf">elementFromPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the topmost element at the specified coordinates. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="ShadowRoot.elementsFromPoint"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ShadowRoot.elementsFromPoint">[docs]</a>    <span class="k">def</span> <span class="nf">elementsFromPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an array of all elements at the specified coordinates. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="ShadowRoot.caretPositionFromPoint"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ShadowRoot.caretPositionFromPoint">[docs]</a>    <span class="k">def</span> <span class="nf">caretPositionFromPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a CaretPosition object containing the DOM node containing the caret,</span>
<span class="sd">        and caret&#39;s character offset within that node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="DocumentType"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DocumentType">[docs]</a><span class="k">class</span> <span class="nc">DocumentType</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">,</span> <span class="n">publicId</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">systemId</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>  <span class="c1"># A DOMString, eg &quot;html&quot; for &lt;!DOCTYPE HTML&gt;.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">publicId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">publicId</span>  <span class="c1"># A DOMString, eg &quot;-//W3C//DTD HTML 4.01//EN&quot;, empty string for HTML5.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">systemId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">systemId</span>  <span class="c1"># A DOMString, eg &quot;http://www.w3.org/TR/html4/strict.dtd&quot;, empty string for HTML5.</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

<div class="viewcode-block" id="DocumentType.internalSubset"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DocumentType.internalSubset">[docs]</a>    <span class="k">def</span> <span class="nf">internalSubset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; A DOMString of the internal subset, or None. Eg &quot;&lt;!ELEMENT foo (bar)&gt;&quot;.&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">systemId</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">systemId</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="DocumentType.notations"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DocumentType.notations">[docs]</a>    <span class="k">def</span> <span class="nf">notations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; A NamedNodeMap with notations declared in the DTD. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodeType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Node</span><span class="o">.</span><span class="n">DOCUMENT_TYPE_NODE</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;!DOCTYPE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">publicId</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">systemId</span><span class="si">}</span><span class="s2">&gt;&quot;</span></div>


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">def AriaMixin():  #???</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaAtomic(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-atomic&#39;)</span>

<span class="sd">    @ariaAtomic.setter</span>
<span class="sd">    def ariaAtomic(self, value: str):</span>
<span class="sd">        self.setAttribute(&#39;aria-atomic&#39;, value)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaAtomic(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-atomic&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaAutoComplete(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-autoComplete&#39;)</span>

<span class="sd">    @ariaAutoComplete.setter</span>
<span class="sd">    def ariaAutoComplete(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-autoComplete&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaBusy(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-busy&#39;)</span>

<span class="sd">    @ariaBusy.setter</span>
<span class="sd">    def ariaBusy(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-busy&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaChecked(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-checked&#39;)</span>

<span class="sd">    @ariaChecked.setter</span>
<span class="sd">    def ariaChecked(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-checked&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaColCount(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-colCount&#39;)</span>

<span class="sd">    @ariaColCount.setter</span>
<span class="sd">    def ariaColCount(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-colCount&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaColIndex(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-colIndex&#39;)</span>

<span class="sd">    @ariaColIndex.setter</span>
<span class="sd">    def ariaColIndex(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-colIndex&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaColIndexText(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-colIndexText&#39;)</span>

<span class="sd">    @ariaColIndexText.setter</span>
<span class="sd">    def ariaColIndexText(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-colIndexText&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaColSpan(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-colSpan&#39;)</span>

<span class="sd">    @ariaColSpan.setter</span>
<span class="sd">    def ariaColSpan(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-colSpan&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaCurrent(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-current&#39;)</span>

<span class="sd">    @ariaCurrent.setter</span>
<span class="sd">    def ariaCurrent(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-current&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaDescription(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-description&#39;)</span>

<span class="sd">    @ariaDescription.setter</span>
<span class="sd">    def ariaDescription(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-description&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaDisabled(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-disabled&#39;)</span>

<span class="sd">    @ariaDisabled.setter</span>
<span class="sd">    def ariaDisabled(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-disabled&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaExpanded(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-expanded&#39;)</span>

<span class="sd">    @ariaExpanded.setter</span>
<span class="sd">    def ariaExpanded(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-expanded&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaHasPopup(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-hasPopup&#39;)</span>

<span class="sd">    @ariaHasPopup.setter</span>
<span class="sd">    def ariaHasPopup(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-hasPopup&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaHidden(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-hidden&#39;)</span>

<span class="sd">    @ariaHidden.setter</span>
<span class="sd">    def ariaHidden(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-hidden&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaKeyShortcuts(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-keyShortcuts&#39;)</span>

<span class="sd">    @ariaKeyShortcuts.setter</span>
<span class="sd">    def ariaKeyShortcuts(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-keyShortcuts&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaLabel(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-label&#39;)</span>

<span class="sd">    @ariaLabel.setter</span>
<span class="sd">    def ariaLabel(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-label&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaLevel(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-level&#39;)</span>

<span class="sd">    @ariaLevel.setter</span>
<span class="sd">    def ariaLevel(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-level&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaLive(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-live&#39;)</span>

<span class="sd">    @ariaLive.setter</span>
<span class="sd">    def ariaLive(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-live&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaModal(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-modal&#39;)</span>

<span class="sd">    @ariaModal.setter</span>
<span class="sd">    def ariaModal(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-modal&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaMultiline(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-multiline&#39;)</span>

<span class="sd">    @ariaMultiline.setter</span>
<span class="sd">    def ariaMultiline(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-multiline&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaMultiSelectable(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-multiSelectable&#39;)</span>

<span class="sd">    @ariaMultiSelectable.setter</span>
<span class="sd">    def ariaMultiSelectable(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-multiSelectable&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaOrientation(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-orientation&#39;)</span>

<span class="sd">    @ariaOrientation.setter</span>
<span class="sd">    def ariaOrientation(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-orientation&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaPlaceholder(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-placeholder&#39;)</span>

<span class="sd">    @ariaPlaceholder.setter</span>
<span class="sd">    def ariaPlaceholder(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-placeholder&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaPosInSet(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-posInSet&#39;)</span>

<span class="sd">    @ariaPosInSet.setter</span>
<span class="sd">    def ariaPosInSet(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-posInSet&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaPressed(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-pressed&#39;)</span>

<span class="sd">    @ariaPressed.setter</span>
<span class="sd">    def ariaPressed(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-pressed&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaReadOnly(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-readOnly&#39;)</span>

<span class="sd">    @ariaReadOnly.setter</span>
<span class="sd">    def ariaReadOnly(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-readOnly&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaRelevant(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-relevant&#39;)</span>

<span class="sd">    @ariaRelevant.setter</span>
<span class="sd">    def ariaRelevant(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-relevant&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaRequired(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-required&#39;)</span>

<span class="sd">    @ariaRequired.setter</span>
<span class="sd">    def ariaRequired(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-required&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaRoleDescription(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-roleDescription&#39;)</span>

<span class="sd">    @ariaRoleDescription.setter</span>
<span class="sd">    def ariaRoleDescription(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-roleDescription&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaRowCount(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-rowCount&#39;)</span>

<span class="sd">    @ariaRowCount.setter</span>
<span class="sd">    def ariaRowCount(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-rowCount&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaRowIndex(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-rowIndex&#39;)</span>

<span class="sd">    @ariaRowIndex.setter</span>
<span class="sd">    def ariaRowIndex(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-rowIndex&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaRowIndexText(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-rowIndexText&#39;)</span>

<span class="sd">    @ariaRowIndexText.setter</span>
<span class="sd">    def ariaRowIndexText(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-rowIndexText&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaRowSpan(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-rowSpan&#39;)</span>

<span class="sd">    @ariaRowSpan.setter</span>
<span class="sd">    def ariaRowSpan(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-rowSpan&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaSelected(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-selected&#39;)</span>

<span class="sd">    @ariaSelected.setter</span>
<span class="sd">    def ariaSelected(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-selected&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaSetSize(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-setSize&#39;)</span>

<span class="sd">    @ariaSetSize.setter</span>
<span class="sd">    def ariaSetSize(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-setSize&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaSort(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-sort&#39;)</span>

<span class="sd">    @ariaSort.setter</span>
<span class="sd">    def ariaSort(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-sort&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaValueMax(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-valueMax&#39;)</span>

<span class="sd">    @ariaValueMax.setter</span>
<span class="sd">    def ariaValueMax(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-valueMax&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaValueMin(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-valueMin&#39;)</span>

<span class="sd">    @ariaValueMin.setter</span>
<span class="sd">    def ariaValueMin(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-valueMin&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaValueNow(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-valueNow&#39;)</span>

<span class="sd">    @ariaValueNow.setter</span>
<span class="sd">    def ariaValueNow(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-valueNow&#39;)</span>

<span class="sd">    @property</span>
<span class="sd">    def ariaValueText(self):</span>
<span class="sd">        return self.getAttribute(&#39;aria-valueText&#39;)</span>

<span class="sd">    @ariaValueText.setter</span>
<span class="sd">    def ariaValueText(self, value: str):</span>
<span class="sd">        return self.getAttribute(&#39;aria-valueText&#39;)</span>

<span class="sd"># class ElementInternals(object, AriaMixin):</span>
<span class="sd">#     def __init__(self, element):</span>
<span class="sd">#         self.element = element</span>
<span class="sd">#         self.shadowRoot = None # Returns the ShadowRoot object associated with this element.</span>
<span class="sd">#         self.form  # Returns the HTMLFormElement associated with this element.</span>
<span class="sd">#         self.states  # Returns the CustomStateSet associated with this element.</span>
<span class="sd">#         self.willValidate # A boolean value which returns true if the element is a submittable element that is a candidate for constraint validation.</span>
<span class="sd">#         self.validity  # Returns a ValidityState object which represents the different validity states the element can be in, with respect to constraint validation.</span>
<span class="sd">#         self.validationMessage  # A string containing the validation message of this element.</span>
<span class="sd">#         self.labels  # Returns a NodeList of all of the label elements associated with this element.</span>


<span class="sd">class CustomStateSet(object):</span>

<span class="sd">    def __init__(self):</span>
<span class="sd">        pass</span>

<span class="sd">    def add(self, state):</span>
<span class="sd">        pass</span>

<span class="sd">    def clear(self):</span>
<span class="sd">        pass</span>

<span class="sd">    def delete(self, state):</span>
<span class="sd">        pass</span>

<span class="sd">&quot;&quot;&quot;</span>


<div class="viewcode-block" id="NodeList"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeList">[docs]</a><span class="k">class</span> <span class="nc">NodeList</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;NodeList objects are collections of nodes&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="NodeList.item"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeList.item">[docs]</a>    <span class="k">def</span> <span class="nf">item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns an item in the list by its index, or null if the index is out-of-bounds.&quot;&quot;&quot;</span>
        <span class="c1"># An alternative to accessing nodeList[i] (which instead returns  undefined when i is out-of-bounds).</span>
        <span class="c1"># This is mostly useful for non-JavaScript DOM implementations.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="NodeList.entries"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeList.entries">[docs]</a>    <span class="k">def</span> <span class="nf">entries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Node</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator, allowing code to go through all key/value pairs contained in the collection.</span>
<span class="sd">        (In this case, the keys are numbers starting from 0 and the values are nodes.&quot;&quot;&quot;</span>
        <span class="c1"># i.e.  Array [ 0, &lt;p&gt; ]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">yield</span> <span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span></div>

<div class="viewcode-block" id="NodeList.forEach"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeList.forEach">[docs]</a>    <span class="k">def</span> <span class="nf">forEach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">thisArg</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Calls a function for each item in the NodeList.&quot;&quot;&quot;</span>
        <span class="c1"># thisArg = thisArg or self</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="NodeList.keys"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeList.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator, allowing code to go through all the keys of the key/value pairs contained in the collection.</span>
<span class="sd">        (In this case, the keys are numbers starting from 0.)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span></div>

<div class="viewcode-block" id="NodeList.values"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeList.values">[docs]</a>    <span class="k">def</span> <span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns an iterator allowing code to go through all values (nodes) of the key/value pairs</span>
<span class="sd">        contained in the collection.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RadioNodeList"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.RadioNodeList">[docs]</a><span class="k">class</span> <span class="nc">RadioNodeList</span><span class="p">(</span><span class="n">NodeList</span><span class="p">):</span>
    <span class="c1"># TODO - not tested</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># , owner: Element):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getElementsByName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElementsByName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getElementsByName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the first element in the collection,</span>
<span class="sd">        or null if there are no elements in the collection. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Element"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element">[docs]</a><span class="k">class</span> <span class="nc">Element</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Baseclass for all html tags &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># self.content = None</span>
        <span class="c1"># self.attributes = None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>  <span class="c1"># &#39;&#39;#None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabIndex</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">className</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">className</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">classList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">classList</span>

        <span class="c1"># self.tagName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Style(self)  # = #&#39;test&#39;#Style()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shadowRoot</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getElementById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># TODO - i think i need to build a hash map of IDs to positions on the tree</span>
        <span class="c1"># for now I&#39;m going using recursion so this is a bit of a hack to do a few levels</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">_getElementById</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">match</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(&#39;fail&#39;, e)</span>
            <span class="k">pass</span>  <span class="c1"># TODO - dont iterate strings</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_getElementByAttrVal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># TODO - i think i need to build a hash map of IDs to positions on the tree</span>
        <span class="c1"># for now I&#39;m going using recursion so this is a bit of a hack to do a few levels</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="o">==</span> <span class="n">val</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">_getElementByAttrVal</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">match</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># TODO - dont iterate strings</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_matchElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        tries to match an element based on the query</span>
<span class="sd">        at moment very basic. i.e. single level. just checks between id/tag/class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">query</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">query</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tagName</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">query</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">query</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">classList</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># https://developer.mozilla.org/en-US/docs/Web/API/Element/matches</span>
    <span class="c1"># @classmethod</span>
<div class="viewcode-block" id="Element.matches"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.matches">[docs]</a>    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;[checks to see if the Element would be selected by the provided selectorString]</span>

<span class="sd">        Args:</span>
<span class="sd">            s (str): [css selector]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [bool]: [True if selector maches Element otherwise False]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># print(&quot;matches:&quot;, s)</span>
        <span class="c1"># print(self.document) # TODO - buggin?</span>
        <span class="c1"># print(self.ownerDocument)</span>
        <span class="c1"># matches = (self.document or self.ownerDocument).querySelectorAll(s)</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ownerDocument</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">match</span> <span class="o">==</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># https://developer.mozilla.org/en-US/docs/Web/API/Element/closest</span>
    <span class="k">def</span> <span class="nf">closest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">el</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">while</span> <span class="n">el</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">el</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># TODO - nodeType</span>
            <span class="k">if</span> <span class="n">Element</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">el</span>
            <span class="n">el</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">parentElement</span> <span class="ow">or</span> <span class="n">el</span><span class="o">.</span><span class="n">parentNode</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># @staticmethod</span>
<div class="viewcode-block" id="Element.getElementsBySelector"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.getElementsBySelector">[docs]</a>    <span class="k">def</span> <span class="nf">getElementsBySelector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_selectors</span><span class="p">,</span> <span class="n">document</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Get DOM elements based on the given CSS Selector</span>
<span class="sd">            https://simonwillison.net/2003/Mar/25/getElementsBySelector/ &lt; original author</span>
<span class="sd">            http://www.openjs.com/scripts/dom/css_selector/ &lt; ported to support &#39;,&#39;</span>
<span class="sd">            https://bin-co.com/python/scripts/getelementsbyselector-html-css-query.php &lt; ported to py2 (broken/bugs) *BSD LICENSED*</span>

<span class="sd">            note - always needs a tag in the query</span>
<span class="sd">            i.e. (&#39;a.classname&#39;) will work. but just (&#39;.classname&#39;) wont</span>

<span class="sd">            fixed and ported to py3 here. quite cool means other peoples code works on my dom</span>
<span class="sd">            # TODO - needs to work in conjuctions with _matchElement so querySelector works a bit better and dQuery picks it up</span>
<span class="sd">            # TOOD - *= node content</span>

<span class="sd">        Args:</span>
<span class="sd">            all_selectors ([type]): [description]</span>
<span class="sd">            document ([type]): [description]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [description]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># import string</span>
        <span class="n">all_selectors</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s*([^\w])\s*&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;\1&#39;</span><span class="p">,</span> <span class="n">all_selectors</span><span class="p">)</span>  <span class="c1"># clean up whitespace</span>
        <span class="c1"># Grab all of the tagName elements within current context</span>

        <span class="k">def</span> <span class="nf">getElements</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">tag</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
            <span class="c1"># Get elements matching tag, filter them for class selector</span>
            <span class="n">found</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">con</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>
                <span class="n">elements</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
                <span class="n">found</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">found</span>

        <span class="n">context</span> <span class="o">=</span> <span class="p">[</span><span class="n">document</span><span class="p">]</span>
        <span class="n">inheriters</span> <span class="o">=</span> <span class="n">all_selectors</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="c1"># print(inheriters)</span>

        <span class="c1"># Space</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">inheriters</span><span class="p">:</span>
            <span class="c1"># This part is to make sure that it is not part of a CSS3 Selector</span>
            <span class="n">left_bracket</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">)</span>
            <span class="n">right_bracket</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span><span class="p">)</span>  <span class="c1"># ID</span>
            <span class="k">if</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span><span class="n">pos</span> <span class="o">&gt;</span> <span class="n">left_bracket</span> <span class="ow">and</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">right_bracket</span><span class="p">)):</span>
                <span class="c1"># print(&#39;IM A ID&#39;)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span><span class="p">)</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">ele</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
                <span class="c1"># print(&#39;ele::&#39;,ele)</span>
                <span class="n">context</span> <span class="o">=</span> <span class="p">[</span><span class="n">ele</span><span class="p">]</span>  <span class="c1"># [](ele)</span>
                <span class="k">continue</span>

            <span class="n">pos</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>  <span class="c1"># Class</span>
            <span class="k">if</span><span class="p">(</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span><span class="n">pos</span> <span class="o">&gt;</span> <span class="n">left_bracket</span> <span class="ow">and</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">right_bracket</span><span class="p">)):</span>
                <span class="c1"># print(&#39;IM A CLASS&#39;)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">class_name</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="c1"># print(tag)</span>
                <span class="c1"># print(class_name)</span>
                <span class="n">found</span> <span class="o">=</span> <span class="n">getElements</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
                <span class="c1"># found = document.getElementsByClassName(class_name)</span>
                <span class="c1"># print(found)</span>
                <span class="n">context</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">fnd</span> <span class="ow">in</span> <span class="n">found</span><span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(^|\s)&#39;</span> <span class="o">+</span> <span class="n">class_name</span> <span class="o">+</span> <span class="s1">&#39;(\s|$)&#39;</span><span class="p">,</span> <span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">))):</span>
                        <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fnd</span><span class="p">)</span>

                <span class="k">continue</span>

            <span class="c1"># If the char &#39;[&#39; appears, that means it needs CSS 3 parsing</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s1">&#39;[&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="c1"># Code to deal with attribute selectors</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^(\w*)\[(\w+)([=~\|\^\$\*]?)=?[</span><span class="se">\&#39;</span><span class="s1">&quot;]?([^\]</span><span class="se">\&#39;</span><span class="s1">&quot;]*)[</span><span class="se">\&#39;</span><span class="s1">&quot;]?\]$&#39;</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="p">):</span>
                    <span class="n">tag</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">attr</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                    <span class="n">operator</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;NOPE&quot;</span>  <span class="c1"># ?</span>

                <span class="n">found</span> <span class="o">=</span> <span class="n">getElements</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
                <span class="n">context</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">fnd</span> <span class="ow">in</span> <span class="n">found</span><span class="p">:</span>
                    <span class="c1"># print(fnd)</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;=&#39;</span> <span class="ow">and</span> <span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="o">!=</span> <span class="n">value</span><span class="p">):</span>
                        <span class="k">continue</span>  <span class="c1"># WORKING</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;~&#39;</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(^|</span><span class="se">\\</span><span class="s1">s)&#39;</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s1">&#39;(</span><span class="se">\\</span><span class="s1">s|$)&#39;</span><span class="p">,</span> <span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">)))):</span>
                        <span class="k">continue</span>  <span class="c1"># NOT WORKING?</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;|&#39;</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^&#39;</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s1">&#39;-?&#39;</span><span class="p">,</span> <span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">)))):</span>
                        <span class="k">continue</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;^&#39;</span> <span class="ow">and</span> <span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                        <span class="k">continue</span>  <span class="c1"># WORKING</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;$&#39;</span> <span class="ow">and</span> <span class="nb">str</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">))</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">))):</span>
                        <span class="k">continue</span>  <span class="c1"># kinda WORKING</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)):</span>
                        <span class="k">continue</span>  <span class="c1"># WORKING</span>
                    <span class="k">elif</span><span class="p">(</span><span class="ow">not</span> <span class="n">fnd</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">)):</span>
                        <span class="k">continue</span>
                    <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fnd</span><span class="p">)</span>

                <span class="k">continue</span>

            <span class="c1"># Tag selectors - no class or id specified.</span>
            <span class="n">found</span> <span class="o">=</span> <span class="n">getElements</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
            <span class="n">context</span> <span class="o">=</span> <span class="n">found</span>

        <span class="n">selected</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">selected</span></div>

<div class="viewcode-block" id="Element.append"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts a set of Node objects or DOMString objects after the last child of the Element. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+=</span> <span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="c1"># elem.attachShadow({mode: open|closed})</span>
    <span class="k">def</span> <span class="nf">attachShadow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shadowRoot</span> <span class="o">=</span> <span class="n">ShadowRoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">shadowRoot</span>

    <span class="c1"># def accessKey( key: str ): -&gt; None</span>
        <span class="c1"># &#39;&#39;&#39; Sets or returns the accesskey attribute of an element&#39;&#39;&#39;</span>
        <span class="c1"># return</span>
        <span class="c1"># example</span>
        <span class="c1"># dom.getElementById(&quot;myAnchor&quot;).accessKey = &quot;w&quot;;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NamedNodeMap</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns a NamedNodeMap of an element&#39;s attributes &quot;&quot;&quot;</span>
        <span class="n">newargs</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">newargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Attr</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">),</span> <span class="n">value</span><span class="p">))</span>
        <span class="n">nnm</span> <span class="o">=</span> <span class="n">NamedNodeMap</span><span class="p">(</span><span class="n">newargs</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nnm</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">innerHTML</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the content of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span>

    <span class="nd">@innerHTML</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">innerHTML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># TODO - will need the parser to work for this to work properly. for now shove all on first content node</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="p">,)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">outerHTML</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="nd">@outerHTML</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">outerHTML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Element</span><span class="p">):</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c1"># self = value</span>
            <span class="c1"># TODO - parse</span>
            <span class="c1"># TODO - will need the parser to work for this to work properly</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">return</span> <span class="bp">self</span>

<div class="viewcode-block" id="Element.blur"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.blur">[docs]</a>    <span class="k">def</span> <span class="nf">blur</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes focus from an element &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">classList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the classList attribute of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

    <span class="nd">@classList</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">classList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newname</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the value of the classList attribute of an element &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="n">newname</span><span class="p">)</span>
        <span class="c1"># raise NotImplementedError</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">className</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the value of the className attribute of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span>

    <span class="nd">@className</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">className</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newname</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the value of the className attribute of an element &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="n">newname</span><span class="p">)</span>

<div class="viewcode-block" id="Element.click"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.click">[docs]</a>    <span class="k">def</span> <span class="nf">click</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Simulates a mouse-click on an element &quot;&quot;&quot;</span>
        <span class="c1"># evt = MouseEvent(&#39;click&#39;, {&#39;bubbles&#39;: True,&#39;cancelable&#39;: True,&#39;view&#39;: window});</span>
        <span class="c1"># TODO - don&#39;t if its cancelled</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="n">MouseEvent</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatchEvent</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clientHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the height of an element, including padding &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">paddingTop</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">paddingBottom</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clientLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the width of the left border of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">left</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clientTop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the width of the top border of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">top</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clientWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the width of an element, including padding &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">paddingLeft</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">paddingRight</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">contentEditable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns whether an element is editable &quot;&quot;&quot;</span>
        <span class="n">is_editable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;contenteditable&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="p">(</span><span class="n">is_editable</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="ow">or</span> <span class="n">is_editable</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="nd">@contentEditable</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">contentEditable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;contenteditable&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the dataset attribute of an element &quot;&quot;&quot;</span>
        <span class="c1"># return self.getAttribute(&#39;data-*&#39;)  # TODO - copilot suggested a star. is that supposed to work?</span>
        <span class="c1"># loop all attributes and return the ones that start with data-</span>
        <span class="c1"># return {key: value for key, value in self.kwargs.items() if key.startswith(&#39;data-&#39;)}</span>
        <span class="kn">from</span> <span class="nn">domonic.utils</span> <span class="kn">import</span> <span class="n">Utils</span>

        <span class="n">dsmap</span> <span class="o">=</span> <span class="n">DOMStringMap</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;data-&#39;</span><span class="p">):</span>
                <span class="c1"># remove data from the key and change case to lower</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">camel_case</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;data-&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
                <span class="n">dsmap</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">dsmap</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the value of the dir attribute of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">)</span>

    <span class="nd">@dir</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets the value of the dir attribute of an element &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>

<div class="viewcode-block" id="Element.exitFullscreen"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.exitFullscreen">[docs]</a>    <span class="k">def</span> <span class="nf">exitFullscreen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Cancels an element in fullscreen mode &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.firstElementChild"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.firstElementChild">[docs]</a>    <span class="k">def</span> <span class="nf">firstElementChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the first child element of an element &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Element.focus"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.focus">[docs]</a>    <span class="k">def</span> <span class="nf">focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets focus on an element &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.setAttributeNodeNS"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.setAttributeNodeNS">[docs]</a>    <span class="k">def</span> <span class="nf">setAttributeNodeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot; Sets the attribute node of an element &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">Attr</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">),</span> <span class="n">attr</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttributeNode</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Element.getAttributeNodeNS"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.getAttributeNodeNS">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributeNodeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot; Sets the attribute node of an element &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">Attr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.setAttributeNS"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.setAttributeNS">[docs]</a>    <span class="k">def</span> <span class="nf">setAttributeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespaceURI</span><span class="p">,</span> <span class="n">localName</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets an attribute in the given namespace &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">localName</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.getAttributeNS"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.getAttributeNS">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespaceURI</span><span class="p">,</span> <span class="n">localName</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the value of the specified attribute &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">localName</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.removeAttributeNS"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.removeAttributeNS">[docs]</a>    <span class="k">def</span> <span class="nf">removeAttributeNS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespaceURI</span><span class="p">,</span> <span class="n">localName</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes an attribute from an element &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">localName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">removeAttribute</span><span class="p">(</span><span class="n">localName</span><span class="p">)</span>
        <span class="c1"># else:</span>
        <span class="c1">#     raise AttributeError</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Element.getAttribute"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.getAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">getAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the specified attribute value of an element node &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span><span class="p">:</span>
                <span class="n">attribute</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">attribute</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(&#39;failed to get attribute&#39;)</span>
            <span class="c1"># print(e)</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Element.getAttributeNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.getAttributeNode">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributeNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the specified attribute node &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">attribute</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">attribute</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># TODO - Attr</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(&#39;failed to get attribute&#39;)</span>
            <span class="c1"># print(e)</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>

<div class="viewcode-block" id="Element.getBoundingClientRect"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.getBoundingClientRect">[docs]</a>    <span class="k">def</span> <span class="nf">getBoundingClientRect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the size of an element and its position relative to the viewport &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.getElementsByClassName"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.getElementsByClassName">[docs]</a>    <span class="k">def</span> <span class="nf">getElementsByClassName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">className</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns a collection of all child elements with the specified class name]</span>

<span class="sd">        Args:</span>
<span class="sd">            className (str): [a DOMString representing the class name to match]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a NodeList of all child elements with the specified class name]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">className</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.getElementsByTagName"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.getElementsByTagName">[docs]</a>    <span class="k">def</span> <span class="nf">getElementsByTagName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tagName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns a collection of all child elements with the specified tag name &quot;&quot;&quot;</span>
        <span class="c1"># tagName = tagName.lower()</span>
        <span class="c1"># if tag == &#39;*&#39;:</span>
        <span class="c1">#     return self.children</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">tagName</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.hasAttribute"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.hasAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">hasAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns true if an element has the specified attribute, otherwise false &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span><span class="p">:</span>
                <span class="n">attribute</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
            <span class="k">return</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(&#39;failed to get attribute&#39;)</span>
            <span class="c1"># print(e)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Element.hasAttributes"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.hasAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">hasAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns true if an element has any attributes, otherwise false &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the value of the id attribute of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>

    <span class="nd">@id</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newid</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the value of the id attribute of an element &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">newid</span><span class="p">)</span>

    <span class="c1"># Sets or returns the text content of a node and its descendants</span>
    <span class="k">def</span> <span class="nf">innerText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">each</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">])</span>

    <span class="c1"># Inserts an element adjacent to the current element</span>
<div class="viewcode-block" id="Element.insertAdjacentElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.insertAdjacentElement">[docs]</a>    <span class="k">def</span> <span class="nf">insertAdjacentElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>  <span class="c1"># TODO - test. these look wrong.</span>
        <span class="sd">&quot;&quot;&quot; Inserts an element adjacent to the current element &quot;&quot;&quot;</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">position</span> <span class="o">==</span> <span class="s1">&#39;BEFOREBEGIN&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstElementChild</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s1">&#39;AFTERBEGIN&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstElementChild</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s1">&#39;AFTEREND&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertAfter</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstElementChild</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">position</span> <span class="o">==</span> <span class="s1">&#39;BEFOREEND&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastElementChild</span><span class="p">())</span></div>

<div class="viewcode-block" id="Element.insertAdjacentHTML"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.insertAdjacentHTML">[docs]</a>    <span class="k">def</span> <span class="nf">insertAdjacentHTML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts raw HTML adjacent to the current element &quot;&quot;&quot;</span>
        <span class="c1"># if position == &#39;beforebegin&#39;:</span>
        <span class="c1">#     self.insertAdjacentElement(&#39;beforebegin&#39;, html)</span>
        <span class="c1"># elif position == &#39;afterbegin&#39;:</span>
        <span class="c1">#     self.insertAdjacentElement(&#39;afterbegin&#39;, html)</span>
        <span class="c1"># elif position == &#39;beforeend&#39;:</span>
        <span class="c1">#     self.insertAdjacentElement(&#39;beforeend&#39;, html)</span>
        <span class="c1"># elif position == &#39;afterend&#39;:</span>
        <span class="c1">#     self.insertAdjacentElement(&#39;afterend&#39;, html)</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Element.insertAdjacentText"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.insertAdjacentText">[docs]</a>    <span class="k">def</span> <span class="nf">insertAdjacentText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts text adjacent to the current element &quot;&quot;&quot;</span>
        <span class="c1"># if position == &#39;beforebegin&#39;:</span>
        <span class="c1">#     self.insertAdjacentElement(&#39;beforebegin&#39;, text)</span>
        <span class="c1"># elif position == &#39;afterbegin&#39;:</span>
        <span class="c1">#     self.insertAdjacentElement(&#39;afterbegin&#39;, text)</span>
        <span class="c1"># elif position == &#39;beforeend&#39;:</span>
        <span class="c1">#     self.insertAdjacentElement(&#39;beforeend&#39;, text)</span>
        <span class="c1"># elif position == &#39;afterend&#39;:</span>
        <span class="c1">#     self.insertAdjacentElement(&#39;afterend&#39;, text)</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Element.isContentEditable"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.isContentEditable">[docs]</a>    <span class="k">def</span> <span class="nf">isContentEditable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns true if the content of an element is editable, otherwise false&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;contenteditable&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># def lang(self) -&gt; str:</span>
    <span class="c1">#     &quot;&quot;&quot; Sets or returns the value of the lang attribute of an element &quot;&quot;&quot; # TODO - prop?</span>
    <span class="c1">#     return self.getAttribute(&#39;lang&#39;)</span>

<div class="viewcode-block" id="Element.lastElementChild"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.lastElementChild">[docs]</a>    <span class="k">def</span> <span class="nf">lastElementChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns the last child element of an element]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [the last child element of an element]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Element.namespaceURI"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.namespaceURI">[docs]</a>    <span class="k">def</span> <span class="nf">namespaceURI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the namespace URI of an element&#39;&#39;&#39;</span>
        <span class="k">pass</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the next node at the same node tree level &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">el</span> <span class="ow">is</span> <span class="bp">self</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nextElementSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the next element at the same node tree level &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">el</span> <span class="ow">is</span> <span class="bp">self</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">str</span><span class="p">:</span>
                        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">previousElementSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the Element immediately prior to the specified one in its parent&#39;s children list,</span>
<span class="sd">        or None if the specified element is the first one in the list. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">el</span> <span class="ow">is</span> <span class="bp">self</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">str</span><span class="p">:</span>
                        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="Element.normalize"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.normalize">[docs]</a>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Joins adjacent text nodes and removes empty text nodes in an element&#39;&#39;&#39;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="n">Text</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">textContent</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
                <span class="k">continue</span>
            <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">Text</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">]))]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span></div>

<div class="viewcode-block" id="Element.offsetHeight"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.offsetHeight">[docs]</a>    <span class="k">def</span> <span class="nf">offsetHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the height of an element, including padding, border and scrollbar&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.offsetWidth"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.offsetWidth">[docs]</a>    <span class="k">def</span> <span class="nf">offsetWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the width of an element, including padding, border and scrollbar&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.offsetLeft"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.offsetLeft">[docs]</a>    <span class="k">def</span> <span class="nf">offsetLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the horizontal offset position of an element&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.offsetParent"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.offsetParent">[docs]</a>    <span class="k">def</span> <span class="nf">offsetParent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the offset container of an element&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.offsetTop"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.offsetTop">[docs]</a>    <span class="k">def</span> <span class="nf">offsetTop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the vertical offset position of an element&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parentElement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the parent element node of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">previousSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the previous node at the same node tree level &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">el</span> <span class="ow">is</span> <span class="bp">self</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="Element.querySelector"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.querySelector">[docs]</a>    <span class="k">def</span> <span class="nf">querySelector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns the first child element that matches a specified CSS selector(s) of an element]</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str): [a CSS selector string]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [an Element object]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="n">query</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Element.querySelectorAll"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.querySelectorAll">[docs]</a>    <span class="k">def</span> <span class="nf">querySelectorAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns all child elements that matches a specified CSS selector(s) of an element]</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str): [a CSS selector string]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a list of Element objects]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO - if query is more complex than just single tagname, class or id then call getElementsBySelector instead</span>
        <span class="c1"># remove the first character if it&#39;s a &#39;.&#39; or &#39;#&#39;</span>
        <span class="c1"># bodge for now. better than not working</span>
        <span class="c1"># print(query)</span>
        <span class="c1"># if query[0] == &#39;.&#39; or query[0] == &#39;#&#39;:</span>
        <span class="c1"># print(&#39;it startes!&#39;)</span>
        <span class="n">naked_query</span> <span class="o">=</span> <span class="n">query</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="c1"># print(&quot;dis:::&quot;,naked_query)</span>
        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">naked_query</span> <span class="ow">or</span> <span class="s1">&#39;[&#39;</span> <span class="ow">in</span> <span class="n">naked_query</span> <span class="ow">or</span> <span class="s1">&#39; &#39;</span> <span class="ow">in</span> <span class="n">naked_query</span><span class="p">:</span>
            <span class="c1"># print(&#39;DIVERTED!&#39;, query)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElementsBySelector</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="c1"># TODO - bug?. elements selector seems to only work if tag is provided</span>
        <span class="c1"># so having to do this for now.</span>

        <span class="c1"># print(&#39;NOT DIVERTED&#39;)</span>

        <span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">def</span> <span class="nf">anon</span><span class="p">(</span><span class="n">el</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matchElement</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
                <span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_iterate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anon</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">elements</span></div>

<div class="viewcode-block" id="Element.remove"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes the element from the DOM &quot;&quot;&quot;</span>
        <span class="c1"># self.ownerDocument</span>
        <span class="c1"># raise NotImplementedError</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.removeAttribute"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.removeAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">removeAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes a specified attribute from an element &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span><span class="p">:</span>
                <span class="n">attribute</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">attribute</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;failed to remove!&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Element.removeAttributeNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.removeAttributeNode">[docs]</a>    <span class="k">def</span> <span class="nf">removeAttributeNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">):</span>  <span class="c1"># untested</span>
        <span class="sd">&quot;&quot;&quot; Removes a specified attribute node, and returns the removed node &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attribute</span> <span class="o">==</span> <span class="n">each</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">each</span><span class="p">]</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">each</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">Attr</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.requestFullscreen"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.requestFullscreen">[docs]</a>    <span class="k">def</span> <span class="nf">requestFullscreen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Shows an element in fullscreen mode &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="c1"># def setPointerCapture(self):</span>
    <span class="c1">#     &#39;&#39;&#39; Sets the pointer capture to the specified element &#39;&#39;&#39;</span>
    <span class="c1">#     raise NotImplementedError</span>

    <span class="c1"># def releasePointerCapture(self):</span>
    <span class="c1">#     &#39;&#39;&#39; Releases the pointer capture from the specified element &#39;&#39;&#39;</span>
    <span class="c1">#     raise NotImplementedError</span>

<div class="viewcode-block" id="Element.scrollHeight"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.scrollHeight">[docs]</a>    <span class="k">def</span> <span class="nf">scrollHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the entire height of an element, including padding &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.scrollIntoView"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.scrollIntoView">[docs]</a>    <span class="k">def</span> <span class="nf">scrollIntoView</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Scrolls the specified element into the visible area of the browser window&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.scrollLeft"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.scrollLeft">[docs]</a>    <span class="k">def</span> <span class="nf">scrollLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Sets or returns the number of pixels an element&#39;s content is scrolled horizontally&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.scrollTop"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.scrollTop">[docs]</a>    <span class="k">def</span> <span class="nf">scrollTop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Sets or returns the number of pixels an element&#39;s content is scrolled vertically&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.scrollWidth"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.scrollWidth">[docs]</a>    <span class="k">def</span> <span class="nf">scrollWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the entire width of an element, including padding&#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Element.setAttribute"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.setAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">setAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Sets or changes the specified attribute, to the specified value &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attribute</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span><span class="p">:</span>
                <span class="n">attribute</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">attribute</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(&#39;failed to set attribute&#39;, e)</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Element.setAttributeNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.setAttributeNode">[docs]</a>    <span class="k">def</span> <span class="nf">setAttributeNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Sets or changes the specified attribute node]</span>

<span class="sd">        Args:</span>
<span class="sd">            attr ([type]): [an Attr object]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">attr</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">style</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the value of the style attribute of an element &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">Style</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__style</span>

    <span class="nd">@style</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__style</span> <span class="o">=</span> <span class="n">style</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__style</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># to set the parent</span>

    <span class="c1"># def tabIndex(self):</span>
        <span class="c1"># &#39;&#39;&#39; Sets or returns the value of the tabindex attribute of an element&#39;&#39;&#39;</span>
        <span class="c1"># pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tagName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="c1"># @property</span>
    <span class="c1"># def textContent(self):</span>
    <span class="c1">#     return self.nodeValue</span>

    <span class="c1"># @textContent.setter</span>
    <span class="c1"># def textContent(self, content):</span>
    <span class="c1">#     self.nodeValue = content</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the value of the title attribute of an element &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>

    <span class="nd">@title</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newtitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Sets the value of the title attribute of an element]</span>

<span class="sd">        Args:</span>
<span class="sd">            newtitle (str): [the new title value]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="n">newtitle</span><span class="p">)</span>

<div class="viewcode-block" id="Element.toString"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Element.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Converts an element to a string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<span class="k">class</span> <span class="nc">DOMImplementation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># self.__domImplementation = None</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">createDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespaceURI</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">qualifiedName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">doctype</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">namespaceURI</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">namespaceURI</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">qualifiedName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">qualifiedName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">doctype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">doctype</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="c1"># d = Document()</span>
        <span class="kn">from</span> <span class="nn">domonic.html</span> <span class="kn">import</span> <span class="n">html</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">html</span><span class="p">()</span>
        <span class="n">d</span><span class="o">.</span><span class="n">createElementNS</span><span class="p">(</span><span class="n">namespaceURI</span><span class="p">,</span> <span class="n">qualifiedName</span><span class="p">)</span>
        <span class="n">d</span><span class="o">.</span><span class="n">doctype</span> <span class="o">=</span> <span class="n">doctype</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">createDocumentType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qualifiedName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">publicId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">systemId</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DocumentType</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;[creates a DocumentType node]</span>

<span class="sd">        Args:</span>
<span class="sd">            qualifiedName (str): [the qualified name of the document type]</span>
<span class="sd">            publicId (str): [the public identifier of the document type]</span>
<span class="sd">            systemId (str): [the system identifier of the document type]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a DocumentType object]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DocumentType</span><span class="p">(</span><span class="n">qualifiedName</span><span class="p">,</span> <span class="n">publicId</span><span class="p">,</span> <span class="n">systemId</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">createHTMLDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># d = Document()</span>
        <span class="c1"># d.createElement(&#39;html&#39;)</span>
        <span class="c1"># d.createElement(&#39;head&#39;)</span>
        <span class="c1"># d.createElement(&#39;body&#39;)</span>
        <span class="c1"># d.title = title</span>
        <span class="c1"># return d</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">hasFeatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">featureList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># return True</span>
        <span class="k">pass</span>


<div class="viewcode-block" id="ProcessingInstruction"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.ProcessingInstruction">[docs]</a><span class="k">class</span> <span class="nc">ProcessingInstruction</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>

    <span class="n">nodeType</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">PROCESSING_INSTRUCTION_NODE</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="n">target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;?</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s1">?&gt;&#39;</span>
    <span class="fm">__str__</span> <span class="o">=</span> <span class="n">toString</span></div>

    <span class="c1"># @property</span>
    <span class="c1"># def nodeType(self) -&gt; int:</span>
    <span class="c1">#     return Node.PROCESSING_INSTRUCTION_NODE</span>


<div class="viewcode-block" id="Comment"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Comment">[docs]</a><span class="k">class</span> <span class="nc">Comment</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>

    <span class="n">nodeType</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">COMMENT_NODE</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;!--</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s1">--&gt;&#39;</span>
    <span class="fm">__str__</span> <span class="o">=</span> <span class="n">toString</span></div>

    <span class="c1"># @property</span>
    <span class="c1"># def nodeType(self) -&gt; int:</span>
    <span class="c1">#     return Node.COMMENT_NODE</span>


<div class="viewcode-block" id="CDATASection"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.CDATASection">[docs]</a><span class="k">class</span> <span class="nc">CDATASection</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>

    <span class="n">nodeType</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">CDATA_SECTION_NODE</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;![CDATA[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s1">]]&gt;&#39;</span>
    <span class="fm">__str__</span> <span class="o">=</span> <span class="n">toString</span></div>

    <span class="c1"># @property</span>
    <span class="c1"># def nodeType(self) -&gt; int:</span>
    <span class="c1">#     return Node.CDATA_SECTION_NODE</span>


<span class="k">class</span> <span class="nc">AbastractRange</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">cloneContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">cloneRange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">compareBoundaryPoints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">how</span><span class="p">,</span> <span class="n">sourceRange</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">createContextualFragment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">deleteContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">detach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">expand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">extractContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">getBoundingClientRect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">getClientRects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">insertNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">selectNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">selectNodeContents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">setEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">setEndAfter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">setEndBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">setStart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">setStartAfter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">setStartBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">surroundContents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newParent</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">comparePoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refNode</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">deleteData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">extractData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">getEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">getStart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">replaceData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">setData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<span class="k">class</span> <span class="nc">Range</span><span class="p">(</span><span class="n">AbastractRange</span><span class="p">):</span>
    <span class="c1"># TODO - untested</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startContainer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startOffset</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endContainer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endOffset</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collapsed</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commonAncestorContainer</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">setStart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startContainer</span> <span class="o">=</span> <span class="n">node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startOffset</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collapsed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commonAncestorContainer</span> <span class="o">=</span> <span class="n">node</span>

    <span class="k">def</span> <span class="nf">setEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endContainer</span> <span class="o">=</span> <span class="n">node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endOffset</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collapsed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commonAncestorContainer</span> <span class="o">=</span> <span class="n">node</span>

    <span class="k">def</span> <span class="nf">setStartBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStart</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">parentNode</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setStartAfter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStart</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">parentNode</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setEndBefore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEnd</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">parentNode</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setEndAfter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEnd</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">parentNode</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">collapse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toStart</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">toStart</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">endContainer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">startContainer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">endOffset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">startOffset</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startContainer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">endContainer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startOffset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">endOffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collapsed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">selectNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStartBefore</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEndAfter</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">selectNodeContents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStart</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEnd</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">childNodes</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">compareBoundaryPoints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">how</span><span class="p">,</span> <span class="n">sourceRange</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">how</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">startContainer</span> <span class="o">==</span> <span class="n">sourceRange</span><span class="o">.</span><span class="n">startContainer</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">startOffset</span> <span class="o">==</span> <span class="n">sourceRange</span><span class="o">.</span><span class="n">startOffset</span>
        <span class="k">elif</span> <span class="n">how</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">endContainer</span> <span class="o">==</span> <span class="n">sourceRange</span><span class="o">.</span><span class="n">endContainer</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">endOffset</span> <span class="o">==</span> <span class="n">sourceRange</span><span class="o">.</span><span class="n">endOffset</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">deleteContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">extractContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">cloneContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">insertNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">surroundContents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newParent</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">cloneRange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">detach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">createContextualFragment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fragment</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<span class="k">class</span> <span class="nc">StaticRange</span><span class="p">(</span><span class="n">AbastractRange</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">startContainer</span><span class="p">,</span> <span class="n">startOffset</span><span class="p">,</span> <span class="n">endContainer</span><span class="p">,</span> <span class="n">endOffset</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startContainer</span> <span class="o">=</span> <span class="n">startContainer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startOffset</span> <span class="o">=</span> <span class="n">startOffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endContainer</span> <span class="o">=</span> <span class="n">endContainer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endOffset</span> <span class="o">=</span> <span class="n">endOffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collapsed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commonAncestorContainer</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># def toRange(self):</span>
    <span class="c1">#     return self</span>


<span class="k">class</span> <span class="nc">TimeRanges</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<span class="k">class</span> <span class="nc">XPathExpression</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">nsResolver</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="n">expression</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nsResolver</span> <span class="o">=</span> <span class="n">nsResolver</span>

    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contextNode</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">inResult</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

<span class="c1"># class XPathResult(object):</span>

<span class="c1">#     def __init__(self, resultType, snapshotLength):</span>
<span class="c1">#         self.resultType = resultType</span>
<span class="c1">#         self.snapshotLength = snapshotLength</span>

<span class="c1">#     def iter(self):</span>
<span class="c1">#         raise NotImplementedError</span>

<span class="c1">#     def snapshotItem(self, index):</span>
<span class="c1">#         raise NotImplementedError</span>


<span class="k">class</span> <span class="nc">XPathEvaluator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">createExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">nsResolver</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">createNSResolver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeResolver</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">contextNode</span><span class="p">,</span> <span class="n">nsResolver</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">inResult</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<div class="viewcode-block" id="Document"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document">[docs]</a><span class="k">class</span> <span class="nc">Document</span><span class="p">(</span><span class="n">Element</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; the Document class is also the baseclass for the html tag &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; init Creates a new Document &quot;&quot;&quot;</span>
        <span class="c1"># self.doc = doc</span>
        <span class="c1"># self.uri = uri</span>
        <span class="c1"># self.documentURI = uri</span>
        <span class="c1"># self.documentElement = self</span>
        <span class="c1"># self.raw</span>
        <span class="c1"># self.stylesheets = StyleSheetList()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># ??</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">global</span> <span class="n">document</span>
            <span class="n">document</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;failed to set document&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">documentElement</span> <span class="o">=</span> <span class="n">instance</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">URL</span> <span class="o">=</span> <span class="n">URL</span><span class="p">()</span><span class="o">.</span><span class="n">href</span>  <span class="c1"># ? this might be old code TODO</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">baseURI</span> <span class="o">=</span> <span class="n">URL</span><span class="p">()</span><span class="o">.</span><span class="n">href</span>  <span class="c1"># ? this might be old code TODO</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">global</span> <span class="n">document</span>
            <span class="n">document</span> <span class="o">=</span> <span class="n">instance</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;failed to set document&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instance</span>

    <span class="c1"># TODO - still not great as it also returns &#39;links&#39; when searching for &#39;li&#39;</span>
    <span class="c1"># @property</span>
    <span class="k">def</span> <span class="nf">_get_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>  <span class="c1"># TODO - still old</span>
        <span class="sd">&#39;&#39;&#39; returns the tags you want &#39;&#39;&#39;</span>
        <span class="n">reg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;(&lt;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">.*?&gt;.+?&lt;/</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&gt;)&quot;</span>

        <span class="n">closed_tags</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;base&quot;</span><span class="p">,</span> <span class="s2">&quot;link&quot;</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="s2">&quot;hr&quot;</span><span class="p">,</span> <span class="s2">&quot;br&quot;</span><span class="p">,</span> <span class="s2">&quot;wbr&quot;</span><span class="p">,</span> <span class="s2">&quot;img&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;embed&quot;</span><span class="p">,</span> <span class="s2">&quot;param&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;track&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;col&quot;</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="s2">&quot;keygen&quot;</span><span class="p">,</span> <span class="s2">&quot;command&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">closed_tags</span><span class="p">:</span>
            <span class="n">reg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;(&lt;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">.*?/&gt;)&quot;</span>

        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">reg</span><span class="p">)</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">tags</span>

    <span class="c1"># def activeElement():</span>
        <span class="sd">&#39;&#39;&#39; Returns the currently focused element in the document&#39;&#39;&#39;</span>
        <span class="c1"># return</span>

    <span class="c1"># def adoptNode(self, node):</span>
    <span class="c1">#     &quot;&quot;&quot; Adopts a node from another document &quot;&quot;&quot;</span>
    <span class="c1">#     if node.ownerDocument is not None:</span>
    <span class="c1">#         node.ownerDocument.removeChild(node)</span>
    <span class="c1">#     node.ownerDocument = self</span>
    <span class="c1">#     return node</span>

<div class="viewcode-block" id="Document.anchors"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.anchors">[docs]</a>    <span class="k">def</span> <span class="nf">anchors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># TODO - still old</span>
        <span class="sd">&#39;&#39;&#39; Returns a collection of all &lt;a&gt; elements in the document that have a name attribute&#39;&#39;&#39;</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_tags</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tags</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)]</span></div>

<div class="viewcode-block" id="Document.applets"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.applets">[docs]</a>    <span class="k">def</span> <span class="nf">applets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a collection of all &lt;applet&gt; elements in the document &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;applet&#39;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">body</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the document&#39;s body (the &lt;body&gt; element) &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>

    <span class="nd">@body</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>  <span class="c1"># ¬†TODO - untested</span>
        <span class="sd">&quot;&quot;&quot; Sets the document&#39;s body (the &lt;body&gt; element) &quot;&quot;&quot;</span>
        <span class="c1"># TODO - remove an existing body ?</span>
        <span class="kn">from</span> <span class="nn">domonic.html</span> <span class="kn">import</span> <span class="n">body</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">body</span><span class="p">(</span><span class="n">content</span><span class="p">))</span>

    <span class="c1"># def close():</span>
        <span class="sd">&quot;&quot;&quot; Closes the output stream previously opened with document.open() &quot;&quot;&quot;</span>
        <span class="c1"># return</span>

    <span class="c1"># def cookie():</span>
        <span class="sd">&quot;&quot;&quot; Returns all name/value pairs of cookies in the document &quot;&quot;&quot;</span>
        <span class="c1"># return</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">charset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the character encoding for the document. Deprecated: Use characterSet instead. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;UTF-8&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">characterSet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the character encoding for the document &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;UTF-8&quot;</span>

<div class="viewcode-block" id="Document.createAttribute"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createAttribute">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createAttribute</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates an attribute node &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Attr</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.createComment"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createComment">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createComment</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a Comment node with the specified text &quot;&quot;&quot;</span>
        <span class="c1"># from domonic.html import comment</span>
        <span class="c1"># return comment(message)</span>
        <span class="k">return</span> <span class="n">Comment</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.createDocumentFragment"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createDocumentFragment">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createDocumentFragment</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates an empty DocumentFragment node if not content passed. I added args as optional to pass content &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DocumentFragment</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.createExpression"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createExpression">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createExpression</span><span class="p">(</span><span class="n">xpath</span><span class="p">,</span> <span class="n">nsResolver</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates an XPathExpression object for the given XPath string. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">XPathExpression</span><span class="p">(</span><span class="n">xpath</span><span class="p">,</span> <span class="n">nsResolver</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.createElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createElement">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createElement</span><span class="p">(</span><span class="n">_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates an Element node &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">domonic.html</span> <span class="kn">import</span> <span class="n">create_element</span>
        <span class="k">return</span> <span class="n">create_element</span><span class="p">(</span><span class="n">_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.createElementNS"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createElementNS">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createElementNS</span><span class="p">(</span><span class="n">namespaceURI</span><span class="p">,</span> <span class="n">qualifiedName</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates an element with the specified namespace URI and qualified name.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">domonic.html</span> <span class="kn">import</span> <span class="n">tag</span><span class="p">,</span> <span class="n">tag_init</span>
        <span class="n">el</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">qualifiedName</span><span class="p">,</span> <span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">Element</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">qualifiedName</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">:</span> <span class="n">tag_init</span><span class="p">})</span>
        <span class="n">el</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">=</span> <span class="n">namespaceURI</span>
        <span class="k">return</span> <span class="n">el</span><span class="p">()</span></div>

<div class="viewcode-block" id="Document.createEvent"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createEvent">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createEvent</span><span class="p">(</span><span class="n">event_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Creates a new event]</span>

<span class="sd">        Args:</span>
<span class="sd">            event_type ([type], optional): [description]. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a new event]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="s2">&quot;MouseEvent&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MouseEvent</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="s2">&quot;KeyboardEvent&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MouseEvent</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">event_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Event</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Event</span><span class="p">()</span></div>

<div class="viewcode-block" id="Document.createTextNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createTextNode">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createTextNode</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Creates a Text node with the specified text.</span>

<span class="sd">        Args:</span>
<span class="sd">            text ([str]): [the text to be inserted]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a new Text node]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.createTreeWalker"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createTreeWalker">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createTreeWalker</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">whatToShow</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">entityReferenceExpansion</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[creates a TreeWalker object]</span>

<span class="sd">        Args:</span>
<span class="sd">            root ([type]): [the root node at which to begin traversal]</span>
<span class="sd">            whatToShow ([type], optional): [what types of nodes to show]. Defaults to None.</span>
<span class="sd">            filter ([type], optional): [a NodeFilter or a function to be called for each node]. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a new TreeWalker object]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">whatToShow</span> <span class="o">=</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">SHOW_ALL</span> <span class="k">if</span> <span class="n">whatToShow</span> <span class="o">==</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">whatToShow</span>
        <span class="k">return</span> <span class="n">TreeWalker</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">whatToShow</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">entityReferenceExpansion</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.createProcessingInstruction"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createProcessingInstruction">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createProcessingInstruction</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a ProcessingInstruction node with the specified target and data &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ProcessingInstruction</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.createEntityReference"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createEntityReference">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createEntityReference</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates an EntityReference node with the specified name &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">EntityReference</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xmlversion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the version of XML used for the document &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;1.0&quot;</span>

    <span class="c1"># @property</span>
    <span class="c1"># def currentScript(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns the currently executing script or null if none is executing &quot;&quot;&quot;</span>
    <span class="c1">#     return self.querySelector(&#39;script&#39;)</span>

<div class="viewcode-block" id="Document.createCDATASection"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createCDATASection">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createCDATASection</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates a CDATASection node with the specified data &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CDATASection</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def createAttributeNS(namespaceURI, qualifiedName):</span>
    <span class="c1">#     &quot;&quot;&quot; Creates an Attr node with the specified namespace URI and qualified name &quot;&quot;&quot;</span>
    <span class="c1">#     return Attr(qualifiedName)</span>

<div class="viewcode-block" id="Document.createRange"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createRange">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createRange</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot; Creates a Range &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Range</span><span class="p">()</span></div>

<div class="viewcode-block" id="Document.createNodeIterator"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.createNodeIterator">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">createNodeIterator</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">whatToShow</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a NodeIterator that can be used to traverse the document tree or subtree under root.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">whatToShow</span> <span class="o">=</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">SHOW_ALL</span> <span class="k">if</span> <span class="n">whatToShow</span> <span class="o">==</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">whatToShow</span>
        <span class="k">return</span> <span class="n">NodeIterator</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">whatToShow</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def caretRangeFromPoint(x, y):</span>
        <span class="c1"># &quot;&quot;&quot; Returns the Range object that is the caret selection at the given coordinates. &quot;&quot;&quot;</span>
        <span class="c1"># return Range()</span>
        <span class="c1"># raise NotImplementedError</span>

    <span class="c1"># @staticmethod</span>
    <span class="c1"># def createNSResolver(nodeResolver):</span>
    <span class="c1">#     &quot;&quot;&quot; Creates a NodeResolver &quot;&quot;&quot;</span>
    <span class="c1">#     return NodeResolver(nodeResolver)</span>

    <span class="c1"># def defaultView(self):</span>
        <span class="c1"># &quot;&quot;&quot; Returns the window object associated with a document, or null if none is available. &quot;&quot;&quot;</span>
        <span class="c1"># return</span>

    <span class="c1"># def designMode(self):</span>
        <span class="sd">&#39;&#39;&#39; Controls whether the entire document should be editable or not.&#39;&#39;&#39;</span></div>
        <span class="c1"># return</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">doctype</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the Document Type Declaration associated with the document&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;!DOCTYPE html&gt;&quot;</span>
        <span class="c1"># return self.doctype = value</span>

    <span class="nd">@doctype</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">doctype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Sets the Document Type Declaration associated with the document&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_doctype</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span>

    <span class="c1"># def documentElement(self):</span>
        <span class="c1"># &#39;&#39;&#39; Returns the Document Element of the document (the &lt;html&gt; element)&#39;&#39;&#39;</span>
        <span class="c1"># return self</span>

    <span class="c1"># def documentMode(self):</span>
        <span class="sd">&#39;&#39;&#39; Returns the mode used by the browser to render the document&#39;&#39;&#39;</span>
        <span class="c1"># return</span>

<div class="viewcode-block" id="Document.domain"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.domain">[docs]</a>    <span class="k">def</span> <span class="nf">domain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the domain name of the server that loaded the document&#39;&#39;&#39;</span>
        <span class="k">return</span>

    <span class="c1"># def domConfig(self):</span>
        <span class="sd">&#39;&#39;&#39;Obsolete. Returns the DOM configuration of the document&#39;&#39;&#39;</span></div>
        <span class="c1"># return</span>

<div class="viewcode-block" id="Document.elementFromPoint"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.elementFromPoint">[docs]</a>    <span class="k">def</span> <span class="nf">elementFromPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the topmost element at the specified coordinates. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Document.elementsFromPoint"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.elementsFromPoint">[docs]</a>    <span class="k">def</span> <span class="nf">elementsFromPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an array of all elements at the specified coordinates. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">embeds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns a collection of all &lt;embed&gt; elements the document]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a collection of all &lt;embed&gt; elements the document]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;embed&#39;</span><span class="p">)</span>

    <span class="c1"># def execCommand(self):</span>
        <span class="sd">&#39;&#39;&#39;Invokes the specified clipboard operation on the element currently having focus.&#39;&#39;&#39;</span>
        <span class="c1"># return</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">forms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns a collection of all &lt;form&gt; elements in the document&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Document.fullscreenElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.fullscreenElement">[docs]</a>    <span class="k">def</span> <span class="nf">fullscreenElement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the current element that is displayed in fullscreen mode&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Document.fullscreenEnabled"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.fullscreenEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">fullscreenEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns a Boolean value indicating whether the document can be viewed in fullscreen mode&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Document.getElementById"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.getElementById">[docs]</a>    <span class="k">def</span> <span class="nf">getElementById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns the element that has the ID attribute with the specified value]</span>

<span class="sd">        Args:</span>
<span class="sd">            _id ([str]): [the value of the ID attribute]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [the element that has the ID attribute with the specified value]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">each</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">each</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">each</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">_getElementById</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span>
                    <span class="c1"># TODO - i think i need to build a hash map of IDs to positions on the tree</span>
                    <span class="c1"># for now I&#39;m going to use recursion and add this same method to Element</span>
                    <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">match</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># print(&#39;doh&#39;, e)</span>
                <span class="k">pass</span>  <span class="c1"># TODO - dont iterate strings</span>

        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Document.getElementsByName"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.getElementsByName">[docs]</a>    <span class="k">def</span> <span class="nf">getElementsByName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns a NodeList containing all elements with a specified name]</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): [the name to search for]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [the matching elements]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">each</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">each</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">each</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">_getElementByAttrVal</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">match</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># def hasFocus():</span>
        <span class="c1"># &#39;&#39;&#39;Returns a Boolean value indicating whether the document has focus&#39;&#39;&#39;</span>
        <span class="c1"># return</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">head</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the &lt;head&gt; element of the document&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a collection of all &lt;img&gt; elements in the document &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the DOMImplementation object that handles this document &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">DOMImplementation</span><span class="p">()</span>

<div class="viewcode-block" id="Document.importNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.importNode">[docs]</a>    <span class="k">def</span> <span class="nf">importNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Imports a node from another document to this document. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">Element</span><span class="p">):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">node</span><span class="o">.</span><span class="n">ownerDocument</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">return</span> <span class="n">node</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">Comment</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Comment</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">Text</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">ProcessingInstruction</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ProcessingInstruction</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">DocumentFragment</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DocumentFragment</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">Attr</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Attr</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Unsupported node type&quot;</span><span class="p">)</span></div>

    <span class="c1"># def inputEncoding(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns the encoding used to access the document&#39;s resources.&quot;&quot;&quot;</span>
    <span class="c1">#     return</span>

    <span class="c1"># def lastModified():</span>
        <span class="c1"># &#39;&#39;&#39; Returns the date and time the document was last modified&#39;&#39;&#39;</span>
        <span class="c1"># return</span>

<div class="viewcode-block" id="Document.links"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.links">[docs]</a>    <span class="k">def</span> <span class="nf">links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a collection of all &lt;a&gt; and &lt;area&gt; elements in the document that have a href attribute &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></div>

    <span class="c1"># @property</span>
    <span class="c1"># def nodeType(self):</span>
    <span class="c1">#     return Node.DOCUMENT_NODE</span>
    <span class="n">nodeType</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">DOCUMENT_NODE</span>

<div class="viewcode-block" id="Document.normalizeDocument"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.normalizeDocument">[docs]</a>    <span class="k">def</span> <span class="nf">normalizeDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot; Removes empty Text nodes, and joins adjacent nodes &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">each</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">Node</span><span class="o">.</span><span class="n">TEXT_NODE</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">each</span><span class="o">.</span><span class="n">nodeValue</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="n">each</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">each</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">each</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">each</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
        <span class="k">return</span></div>

    <span class="c1"># def open(self):</span>
        <span class="c1"># &#39;&#39;&#39;Opens an HTML output stream to collect output from document.write()&#39;&#39;&#39;</span>
        <span class="c1"># return</span>

    <span class="c1"># def readyState(self):</span>
        <span class="c1"># &#39;&#39;&#39; Returns the (loading) status of the document&#39;&#39;&#39;</span>
        <span class="c1"># return</span>

    <span class="c1"># def referrer():</span>
        <span class="c1"># &#39;&#39;&#39; Returns the URL of the document that loaded the current document&#39;&#39;&#39;</span>
        <span class="c1"># return</span>

<div class="viewcode-block" id="Document.renameNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.renameNode">[docs]</a>    <span class="k">def</span> <span class="nf">renameNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">namespaceURI</span><span class="p">,</span> <span class="n">nodename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Renames the specified node, and returns the renamed node.]</span>

<span class="sd">        Args:</span>
<span class="sd">            node ([type]): [the node to rename]</span>
<span class="sd">            namespaceURI ([type]): [a namespace URI]</span>
<span class="sd">            nodename ([type]): [a node name]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [description]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">==</span> <span class="n">Node</span><span class="o">.</span><span class="n">ELEMENT_NODE</span><span class="p">:</span>
            <span class="n">node</span><span class="o">.</span><span class="n">nodeName</span> <span class="o">=</span> <span class="n">nodename</span>
            <span class="n">node</span><span class="o">.</span><span class="n">namespaceURI</span> <span class="o">=</span> <span class="n">namespaceURI</span>
            <span class="k">return</span> <span class="n">node</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># def requestStorageAccess(self, storage_access_callback):</span>
    <span class="c1">#     &quot;&quot;&quot; Requests permission to access the user&#39;s storage area &quot;&quot;&quot;</span>
    <span class="c1">#     return False</span>

    <span class="c1"># def hasStorageAccess(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns whether the user has granted permission to access the user&#39;s storage area &quot;&quot;&quot;</span>
    <span class="c1">#     return False</span>

    <span class="c1"># @property</span>
    <span class="c1"># def pictureInPictureElement(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns the element currently in Picture-in-Picture mode, if any. &quot;&quot;&quot;</span>
    <span class="c1">#     return None</span>

    <span class="c1"># def exitPictureInPicture(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Exits Picture-in-Picture mode, if any. &quot;&quot;&quot;</span>
    <span class="c1">#     return False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pictureInPictureEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns whether Picture-in-Picture mode is enabled. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scripts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[Returns a collection of &lt;script&gt; elements in the document]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [type]: [a collection of &lt;script&gt; elements in the document]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Document.strictErrorChecking"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.strictErrorChecking">[docs]</a>    <span class="k">def</span> <span class="nf">strictErrorChecking</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns a Boolean value indicating whether to stop on the first error&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[gets the title of the document]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [str]: The title of the document</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># return self.title</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>

    <span class="nd">@title</span><span class="o">.</span><span class="n">setter</span>  <span class="c1"># TODO - test</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; [sets the title of the document]</span>
<span class="sd">        Args:</span>
<span class="sd">            value (str): The title of the document</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span>

    <span class="c1"># def URL(self):</span>
    <span class="c1">#     &#39;&#39;&#39; Returns the full URL of the HTML document&#39;&#39;&#39;</span>
    <span class="c1">#     pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">visibilityState</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the visibility state of the document &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;visible&#39;</span>

<div class="viewcode-block" id="Document.write"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>  <span class="c1"># -&gt; None: #¬†TODO - untested</span>
        <span class="sd">&quot;&quot;&quot;[writes HTML text to a document</span>

<span class="sd">        Args:</span>
<span class="sd">            html (str, optional): [the content to write to the document]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">DocumentFragment</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="p">)</span></div>

<div class="viewcode-block" id="Document.writeln"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Document.writeln">[docs]</a>    <span class="k">def</span> <span class="nf">writeln</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>  <span class="c1"># -&gt; None: #¬†TODO - untested</span>
        <span class="sd">&quot;&quot;&quot;[writes HTML text to a document, followed by a line break]</span>

<span class="sd">        Args:</span>
<span class="sd">            html (str, optional): [the content to write to the document]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div></div>


<span class="k">class</span> <span class="nc">Location</span><span class="p">():</span>
    <span class="c1"># TODO - move this to the window class and remove all domonic.javascript refs in this file</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="n">url</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">href</span>

    <span class="c1"># def __repr__(self):</span>
    <span class="c1">#     return self.uri</span>

    <span class="k">def</span> <span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot; Returns the protocol, hostname and port number of a URL &quot;&quot;&quot;</span>
        <span class="c1"># from domonic.javascript import URL</span>
        <span class="kn">from</span> <span class="nn">domonic.webapi.url</span> <span class="kn">import</span> <span class="n">URL</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">href</span><span class="p">)</span><span class="o">.</span><span class="n">origin</span>

    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># TODO - test</span>
        <span class="sd">&quot;&quot;&quot; Sets or returns the querystring part of a URL &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">domonic.webapi.url</span> <span class="kn">import</span> <span class="n">URL</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">href</span><span class="p">)</span><span class="o">.</span><span class="n">search</span>

    <span class="k">def</span> <span class="nf">assign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Loads a new document &quot;&quot;&quot;</span>
        <span class="c1"># TODO - if different download?</span>
        <span class="c1"># dom.baseURI = url</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">reload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reloads the current document &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replaces the current document with a new one &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>


<span class="n">location</span> <span class="o">=</span> <span class="n">Location</span>


<div class="viewcode-block" id="DocumentFragment"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DocumentFragment">[docs]</a><span class="k">class</span> <span class="nc">DocumentFragment</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="n">args</span>

    <span class="n">querySelector</span> <span class="o">=</span> <span class="n">Document</span><span class="o">.</span><span class="n">querySelector</span>
    <span class="n">querySelectorAll</span> <span class="o">=</span> <span class="n">Document</span><span class="o">.</span><span class="n">querySelectorAll</span>
    <span class="n">getElementById</span> <span class="o">=</span> <span class="n">Document</span><span class="o">.</span><span class="n">getElementById</span>
    <span class="n">getElementsByTagName</span> <span class="o">=</span> <span class="n">Document</span><span class="o">.</span><span class="n">getElementsByTagName</span>
    <span class="n">_matchElement</span> <span class="o">=</span> <span class="n">Document</span><span class="o">.</span><span class="n">_matchElement</span>
    <span class="n">attributes</span> <span class="o">=</span> <span class="n">Element</span><span class="o">.</span><span class="n">attributes</span>

<div class="viewcode-block" id="DocumentFragment.replaceChildren"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DocumentFragment.replaceChildren">[docs]</a>    <span class="k">def</span> <span class="nf">replaceChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newChildren</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Replaces the childNodes of the DocumentFragment object. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">replaceChild</span><span class="p">(</span><span class="n">newChildren</span><span class="p">)</span></div>

    <span class="c1"># @property</span>
    <span class="c1"># def nodeType(self) -&gt; int:</span>
    <span class="c1">#     return Node.DOCUMENT_FRAGMENT_NODE</span>
    <span class="n">nodeType</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">DOCUMENT_FRAGMENT_NODE</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">])</span></div>


<div class="viewcode-block" id="CharacterData"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.CharacterData">[docs]</a><span class="k">class</span> <span class="nc">CharacterData</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The CharacterData abstract interface represents a Node object that contains characters.</span>
<span class="sd">    This is an abstract interface, meaning there aren&#39;t any objects of type CharacterData:</span>
<span class="sd">    it is implemented by other interfaces like Text, Comment, or ProcessingInstruction, which aren&#39;t abstract.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">nextElementSibling</span> <span class="o">=</span> <span class="n">Element</span><span class="o">.</span><span class="n">nextElementSibling</span>
    <span class="n">previousElementSibling</span> <span class="o">=</span> <span class="n">Element</span><span class="o">.</span><span class="n">previousElementSibling</span>

    <span class="n">remove</span> <span class="o">=</span> <span class="n">ChildNode</span><span class="o">.</span><span class="n">remove</span>
    <span class="n">replaceWith</span> <span class="o">=</span> <span class="n">ChildNode</span><span class="o">.</span><span class="n">replaceWith</span>
    <span class="n">before</span> <span class="o">=</span> <span class="n">ChildNode</span><span class="o">.</span><span class="n">before</span>
    <span class="n">after</span> <span class="o">=</span> <span class="n">ChildNode</span><span class="o">.</span><span class="n">after</span>

<div class="viewcode-block" id="CharacterData.appendData"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.CharacterData.appendData">[docs]</a>    <span class="k">def</span> <span class="nf">appendData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Appends the given DOMString to the CharacterData.data string; when this method returns,</span>
<span class="sd">        data contains the concatenated DOMString. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="CharacterData.deleteData"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.CharacterData.deleteData">[docs]</a>    <span class="k">def</span> <span class="nf">deleteData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Removes the specified amount of characters, starting at the specified offset,</span>
<span class="sd">        from the CharacterData.data string; when this method returns, data contains the shortened DOMString. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="n">offset</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">offset</span> <span class="o">+</span> <span class="n">count</span><span class="p">:]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="CharacterData.insertData"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.CharacterData.insertData">[docs]</a>    <span class="k">def</span> <span class="nf">insertData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Inserts the specified characters, at the specified offset, in the CharacterData.data string;</span>
<span class="sd">        when this method returns, data contains the modified DOMString. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="n">offset</span><span class="p">]</span> <span class="o">+</span> <span class="n">data</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">offset</span><span class="p">:]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="CharacterData.replaceData"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.CharacterData.replaceData">[docs]</a>    <span class="k">def</span> <span class="nf">replaceData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Replaces the specified amount of characters, starting at the specified offset, with the specified DOMString;</span>
<span class="sd">        when this method returns, data contains the modified DOMString. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="n">offset</span><span class="p">]</span> <span class="o">+</span> <span class="n">data</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">offset</span> <span class="o">+</span> <span class="n">count</span><span class="p">:]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

    <span class="c1"># def replaceWith(self, newChildren):</span>
    <span class="c1">#     &quot;&quot;&quot; Replaces the characters in the children list of its parent with a set of Node or DOMString objects. &quot;&quot;&quot;</span>
    <span class="c1">#     self.replaceChildren(newChildren) # parentNode?</span>

<div class="viewcode-block" id="CharacterData.substringData"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.CharacterData.substringData">[docs]</a>    <span class="k">def</span> <span class="nf">substringData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a DOMString containing the part of CharacterData.data of the specified length and</span>
<span class="sd">        starting at the specified offset. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">offset</span><span class="p">:</span><span class="n">offset</span> <span class="o">+</span> <span class="n">length</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="EntityReference"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.EntityReference">[docs]</a><span class="k">class</span> <span class="nc">EntityReference</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The EntityReference interface represents a reference to an entity, either parsed</span>
<span class="sd">    or unparsed, in an Entity Node. Note that this is not a CharacterData node,</span>
<span class="sd">    and does not have any child nodes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">])</span>

<div class="viewcode-block" id="EntityReference.ordinal"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.EntityReference.ordinal">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ordinal</span><span class="p">(</span><span class="n">entityName</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the character corresponding to the given entity name. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">ord</span><span class="p">(</span><span class="n">entityName</span><span class="p">)</span>  <span class="c1"># TODO - test. would this work?</span></div>

<div class="viewcode-block" id="EntityReference.fromOrdinal"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.EntityReference.fromOrdinal">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromOrdinal</span><span class="p">(</span><span class="n">ordinal</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the entity name corresponding to the given character. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">chr</span><span class="p">(</span><span class="n">ordinal</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Entity"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Entity">[docs]</a><span class="k">class</span> <span class="nc">Entity</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">])</span>

<div class="viewcode-block" id="Entity.fromName"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Entity.fromName">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromName</span><span class="p">(</span><span class="n">entityName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the entity name corresponding to the given character. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">chr</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">entityName</span><span class="p">))</span></div>

<div class="viewcode-block" id="Entity.fromChar"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Entity.fromChar">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromChar</span><span class="p">(</span><span class="n">char</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the character corresponding to the given entity name. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">ord</span><span class="p">(</span><span class="n">char</span><span class="p">)</span></div></div>


<span class="c1"># class Notation(Node):</span>

<span class="c1">#     def __init__(self, *args):</span>
<span class="c1">#         self.args = args</span>

<span class="c1">#     def __str__(self):</span>
<span class="c1">#         return &#39;&#39;.join([str(a) for a in self.args])</span>

<span class="c1">#     def getPublicId(self):</span>
<span class="c1">#         &quot;&quot;&quot; Returns the public identifier of the notation. &quot;&quot;&quot;</span>
<span class="c1">#         return self.args[0]</span>

<span class="c1">#     def getSystemId(self):</span>
<span class="c1">#         &quot;&quot;&quot; Returns the system identifier of the notation. &quot;&quot;&quot;</span>
<span class="c1">#         return self.args[1]</span>


<div class="viewcode-block" id="Text"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Text">[docs]</a><span class="k">class</span> <span class="nc">Text</span><span class="p">(</span><span class="n">CharacterData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Text Node &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wholeText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a DOMString containing all the text content of the node and its descendants. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="Text.splitText"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.Text.splitText">[docs]</a>    <span class="k">def</span> <span class="nf">splitText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Splits the Text node into two Text nodes at the specified offset, keeping both in the tree as siblings.</span>
<span class="sd">        The first node is returned, while the second node is discarded and exists outside the tree. &quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="n">offset</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">offset</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">text</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">assignedSlot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the slot whose assignedNodes contains this node. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">assignedSlot</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@data</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">,)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># @property</span>
    <span class="c1"># def nodeType(self):</span>
    <span class="c1">#     return Node.TEXT_NODE</span>
    <span class="n">nodeType</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Node</span><span class="o">.</span><span class="n">TEXT_NODE</span>

    <span class="nd">@property</span>  <span class="c1"># TODO - is this correct?</span>
    <span class="k">def</span> <span class="nf">firstChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># ?</span>
        <span class="c1"># https://www.w3.org/TR/2000/CR-DOM-Level-2-20000510/core.html</span>
        <span class="c1"># lvl 2 spec has nochildren on bunch of NodeTypes. might mean overrides required</span>
        <span class="c1">#  to null certain behaviours. i.e. treewalker is having issues here.</span>
        <span class="c1"># TODO - test what it does in the browser. then fix up all required nochildren nodes i.e. comment, doctype, etc.</span>

    <span class="c1"># @property</span>
    <span class="c1"># def firstChild(self):</span>
    <span class="c1">#     return self.args[0]</span>

    <span class="c1"># @property</span>
    <span class="c1"># def textContent(self):</span>
    <span class="c1">#     return self.nodeValue</span>

    <span class="c1"># @textContent.setter</span>
    <span class="c1"># def textContent(self, content):</span>
    <span class="c1">#     self.nodeValue = content</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textContent</span><span class="p">)</span></div>

    <span class="c1"># def __repr__(self):</span>
        <span class="c1"># return str(self.textContent)</span>

<span class="c1"># class HTMLCollection(Node):</span>

<span class="c1">#     def __init__(self, *args):</span>
<span class="c1">#         self.args = args</span>
<span class="c1">#         self.length = len(self.args)</span>

<span class="c1">#     def __len__(self):</span>
<span class="c1">#         return self.length</span>

<span class="c1">#     def __getitem__(self, index):</span>
<span class="c1">#         return self.args[index]</span>

<span class="c1">#     def item(self, index):</span>
<span class="c1">#         return self.args[index]</span>

<span class="c1"># item()    Returns the attribute node at a specified index in a NamedNodeMap   Attribute, HTMLCollection</span>
<span class="c1"># namedItem()   Returns the element with the specified ID, or name, in an HTMLCollection    HTMLCollection</span>

<span class="c1">#     def __iter__(self):</span>
<span class="c1">#         return iter(self.args)</span>

<span class="c1">#     def __next__(self):</span>
<span class="c1">#         return next(self.args)</span>

<span class="c1">#     def __str__(self):</span>
<span class="c1">#         return str(self.args)</span>

<span class="c1">#     def __repr__(self):</span>
<span class="c1">#         return str(self.args)</span>

<span class="c1">#     def __add__(self, other):</span>
<span class="c1">#         return self.args + other.args</span>

<span class="c1">#     def __radd__(self, other):</span>
<span class="c1">#         return other.args + self.args</span>

<span class="c1">#     def __iadd__(self, other):</span>
<span class="c1">#         self.args += other.args</span>
<span class="c1">#         return self</span>


<span class="c1"># TODO - is there a webapi module for this now?</span>
<span class="c1"># from domonic.javascript import Object</span>
<span class="c1"># MutationObserverInit = Object()</span>
<span class="c1"># MutationObserverInit.subtree = False</span>
<span class="c1"># MutationObserverInit.childList = False</span>
<span class="c1"># MutationObserverInit.attributes = False</span>
<span class="c1"># MutationObserverInit.attributeFilter = False</span>
<span class="c1"># MutationObserverInit.attributeOldValue = False</span>
<span class="c1"># MutationObserverInit.characterData = False</span>
<span class="c1"># MutationObserverInit.characterDataOldValue = False</span>

<span class="c1"># class MutationObserver(): # TODO - test</span>
<span class="c1">#     &quot;&quot;&quot; The MutationObserver interface provides the ability to watch for changes being made to the DOM tree. &quot;&quot;&quot;</span>

<span class="c1">#     def __init__(self, callback, opts=MutationObserverInit):</span>
<span class="c1">#         self.callback = callback</span>
<span class="c1">#         self.mutations = []</span>
<span class="c1">#         self.observer = None</span>
<span class="c1">#         self.is_connected = False</span>

<span class="c1">#     def disconnect(self):</span>
<span class="c1">#         &quot;&quot;&quot; Stops the MutationObserver instance from receiving further notifications until</span>
<span class="c1">#         and unless observe() is called again. &quot;&quot;&quot;</span>
<span class="c1">#         self.is_connected = False</span>
<span class="c1">#         self.observer = None</span>
<span class="c1">#         self.mutations = []</span>
<span class="c1">#         self.callback = None</span>
<span class="c1">#         return self</span>

<span class="c1">#     def observe(self, target, options):</span>
<span class="c1">#         &quot;&quot;&quot; Configures the MutationObserver to begin receiving notifications through</span>
<span class="c1">#         its callback function when DOM changes matching the given options occur. &quot;&quot;&quot;</span>
<span class="c1">#         if self.is_connected:</span>
<span class="c1">#             self.disconnect()</span>
<span class="c1">#         self.observer = target.ownerDocument.createNodeObserver(self.mutations.append, True)</span>
<span class="c1">#         self.is_connected = True</span>

<span class="c1">#     def takeRecords(self):</span>
<span class="c1">#         &quot;&quot;&quot; Removes all pending notifications from the MutationObserver&#39;s notification queue</span>
<span class="c1">#         and returns them in a new Array of MutationRecord objects. &quot;&quot;&quot;</span>
<span class="c1">#         return []</span>


<span class="c1"># ResizeObserver</span>
<span class="c1"># IntersectionObserver</span>
<span class="c1"># PerformanceObserver</span>


<div class="viewcode-block" id="DOMException"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMException">[docs]</a><span class="k">class</span> <span class="nc">DOMException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; The DOMException interface represents an anormal event related to the DOM. &quot;&quot;&quot;</span>

    <span class="n">INDEX_SIZE_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">DOMSTRING_SIZE_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">HIERARCHY_REQUEST_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">WRONG_DOCUMENT_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">INVALID_CHARACTER_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">NO_DATA_ALLOWED_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">NO_MODIFICATION_ALLOWED_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">NOT_FOUND_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">NOT_SUPPORTED_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">INUSE_ATTRIBUTE_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">INVALID_STATE_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="n">SYNTAX_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">INVALID_MODIFICATION_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">13</span>
    <span class="n">NAMESPACE_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">14</span>
    <span class="n">INVALID_ACCESS_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span>
    <span class="n">VALIDATION_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="n">TYPE_MISMATCH_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">17</span>
    <span class="n">SECURITY_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">18</span>
    <span class="n">NETWORK_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">19</span>
    <span class="n">ABORT_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">URL_MISMATCH_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">21</span>
    <span class="n">QUOTA_EXCEEDED_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">TIMEOUT_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">23</span>
    <span class="n">INVALID_NODE_TYPE_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">24</span>
    <span class="n">DATA_CLONE_ERR</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">25</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">message</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;DOMException&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span></div>


<div class="viewcode-block" id="DOMTimeStamp"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMTimeStamp">[docs]</a><span class="k">class</span> <span class="nc">DOMTimeStamp</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; The DOMTimeStamp interface represents a numeric value which represents the</span>
<span class="sd">    number of milliseconds since the epoch. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>


<div class="viewcode-block" id="DOMPoint"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMPoint">[docs]</a><span class="k">class</span> <span class="nc">DOMPoint</span><span class="p">(</span><span class="n">vec3</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; The DOMPoint interface represents a point specified by x and y coordinates. &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromPoint</span><span class="p">(</span><span class="n">point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;DOMPoint&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DOMPoint</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">w</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">w</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">)</span></div>


<div class="viewcode-block" id="DOMPointReadOnly"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMPointReadOnly">[docs]</a><span class="k">class</span> <span class="nc">DOMPointReadOnly</span><span class="p">(</span><span class="n">DOMPoint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; The DOMPointReadOnly interface represents a point specified by x and y coordinates. &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromPoint</span><span class="p">(</span><span class="n">point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;DOMPointReadOnly&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DOMPointReadOnly</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">w</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">w</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="p">)</span></div>


<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">class DOMMatrix(mat4):</span>
<span class="sd">    &quot;&quot;&quot; The DOMMatrix interface represents a transformation matrix</span>

<span class="sd">    TODO - https://developer.mozilla.org/en-US/docs/Web/API/DOMMatrix</span>

<span class="sd">    &quot;&quot;&quot;</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def fromFloat64Array(array):</span>
<span class="sd">        return DOMMatrix(</span>
<span class="sd">            array[0],</span>
<span class="sd">            array[1],</span>
<span class="sd">            array[2],</span>
<span class="sd">            array[3],</span>
<span class="sd">            array[4],</span>
<span class="sd">            array[5],</span>
<span class="sd">            array[6],</span>
<span class="sd">            array[7],</span>
<span class="sd">            array[8],</span>
<span class="sd">            array[9],</span>
<span class="sd">            array[10],</span>
<span class="sd">            array[11],</span>
<span class="sd">            array[12],</span>
<span class="sd">            array[13],</span>
<span class="sd">            array[14],</span>
<span class="sd">            array[15]</span>
<span class="sd">        )</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def fromFloat32Array(array):</span>
<span class="sd">        return DOMMatrix(</span>
<span class="sd">            array[0],</span>
<span class="sd">            array[1],</span>
<span class="sd">            array[2],</span>
<span class="sd">            array[3],</span>
<span class="sd">            array[4],</span>
<span class="sd">            array[5],</span>
<span class="sd">            array[6],</span>
<span class="sd">            array[7],</span>
<span class="sd">            array[8],</span>
<span class="sd">            array[9],</span>
<span class="sd">            array[10],</span>
<span class="sd">            array[11],</span>
<span class="sd">            array[12],</span>
<span class="sd">            array[13],</span>
<span class="sd">            array[14],</span>
<span class="sd">            array[15]</span>
<span class="sd">        )</span>

<span class="sd">    @staticmethod</span>
<span class="sd">    def fromMatrix(matrix):</span>
<span class="sd">        return DOMMatrix(matrix.m00, matrix.m01, matrix.m02, matrix.m03,</span>
<span class="sd">                         matrix.m10, matrix.m11, matrix.m12, matrix.m13,</span>
<span class="sd">                         matrix.m20, matrix.m21, matrix.m22, matrix.m23,</span>
<span class="sd">                         matrix.m30, matrix.m31, matrix.m32, matrix.m33)</span>

<span class="sd">    def __init__(self, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33):</span>
<span class="sd">        self.m00 = m00</span>
<span class="sd">        self.m01 = m01</span>
<span class="sd">        self.m02 = m02</span>
<span class="sd">        self.m03 = m03</span>
<span class="sd">        self.m10 = m10</span>
<span class="sd">        self.m11 = m11</span>
<span class="sd">        self.m12 = m12</span>
<span class="sd">        self.m13 = m13</span>
<span class="sd">        self.m20 = m20</span>
<span class="sd">        self.m21 = m21</span>
<span class="sd">        self.m22 = m22</span>
<span class="sd">        self.m23 = m23</span>
<span class="sd">        self.m30 = m30</span>
<span class="sd">        self.m31 = m31</span>
<span class="sd">        self.m32 = m32</span>
<span class="sd">        self.m33 = m33</span>
<span class="sd">        super().__init__(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33)</span>

<span class="sd">    def __str__(self):</span>
<span class="sd">        return &#39;({}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {})&#39;.format(</span>
<span class="sd">            self.m00, self.m01, self.m02, self.m03, self.m10, self.m11, self.m12, self.m13,</span>
<span class="sd">            self.m20, self.m21, self.m22, self.m23, self.m30, self.m31, self.m32, self.m33</span>
<span class="sd">        )</span>

<span class="sd">    # def invertSelf(self):</span>
<span class="sd">    #     self.invert()</span>
<span class="sd">    #     return self</span>

<span class="sd">    # def multiplySelf(self, other):</span>
<span class="sd">    #     self.multiply(other)</span>
<span class="sd">    #     return self</span>

<span class="sd">    # def translateSelf(self, tx, ty, tz):</span>
<span class="sd">    #     self.translate(tx, ty, tz)</span>
<span class="sd">    #     return self</span>
<span class="sd">&#39;&#39;&#39;</span>


<div class="viewcode-block" id="DOMQuad"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.DOMQuad">[docs]</a><span class="k">class</span> <span class="nc">DOMQuad</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; The DOMQuad interface represents a quadrilateral on the plane with its</span>
<span class="sd">    four corners represented as Cartesian coordinates. &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromRect</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;DOMQuad&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DOMQuad</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">rect</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fromQuad</span><span class="p">(</span><span class="n">quad</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;DOMQuad&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DOMQuad</span><span class="p">(</span><span class="n">quad</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">quad</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">quad</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">quad</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">quad</span><span class="o">.</span><span class="n">p3</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">quad</span><span class="o">.</span><span class="n">p3</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">quad</span><span class="o">.</span><span class="n">p4</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">quad</span><span class="o">.</span><span class="n">p4</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getBounds</span><span class="p">(</span><span class="n">quad</span><span class="p">):</span>
        <span class="c1"># return DOMRect(quad.p1.x, quad.p1.y, quad.p2.x - quad.p1.x, quad.p2.y - quad.p1.y)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">toJSON</span><span class="p">(</span><span class="n">quad</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;p1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">quad</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">quad</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">},</span>
            <span class="s1">&#39;p2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">quad</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">quad</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">y</span><span class="p">},</span>
            <span class="s1">&#39;p3&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">quad</span><span class="o">.</span><span class="n">p3</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">quad</span><span class="o">.</span><span class="n">p3</span><span class="o">.</span><span class="n">y</span><span class="p">},</span>
            <span class="s1">&#39;p4&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">quad</span><span class="o">.</span><span class="n">p4</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">quad</span><span class="o">.</span><span class="n">p4</span><span class="o">.</span><span class="n">y</span><span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p1</span> <span class="o">=</span> <span class="n">p1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p2</span> <span class="o">=</span> <span class="n">p2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p3</span> <span class="o">=</span> <span class="n">p3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p4</span> <span class="o">=</span> <span class="n">p4</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p4</span><span class="p">)</span></div>


<span class="c1"># NodeFilter</span>
<span class="c1"># from xml.dom.NodeFilter import NodeFilter</span>
<span class="c1"># https://bspaans.github.io/python-mingus/_modules/xml/dom/xmlbuilder.html</span>
<span class="c1"># https://www.w3.org/TR/2003/WD-DOM-Level-3-LS-20030226/load-save.html</span>
<span class="c1"># https://bspaans.github.io/python-mingus/_modules/xml/dom/xmlbuilder.html</span>
<span class="k">class</span> <span class="nc">NodeFilter</span><span class="p">():</span>

    <span class="n">SHOW_ALL</span> <span class="o">=</span> <span class="mh">0xFFFFFFFF</span>
    <span class="n">SHOW_ELEMENT</span> <span class="o">=</span> <span class="mh">0x00000001</span>
    <span class="n">SHOW_ATTRIBUTE</span> <span class="o">=</span> <span class="mh">0x00000002</span>
    <span class="n">SHOW_TEXT</span> <span class="o">=</span> <span class="mh">0x00000004</span>
    <span class="n">SHOW_CDATA_SECTION</span> <span class="o">=</span> <span class="mh">0x00000008</span>
    <span class="n">SHOW_ENTITY_REFERENCE</span> <span class="o">=</span> <span class="mh">0x00000010</span>
    <span class="n">SHOW_ENTITY</span> <span class="o">=</span> <span class="mh">0x00000020</span>
    <span class="n">SHOW_PROCESSING_INSTRUCTION</span> <span class="o">=</span> <span class="mh">0x00000040</span>
    <span class="n">SHOW_COMMENT</span> <span class="o">=</span> <span class="mh">0x00000080</span>
    <span class="n">SHOW_DOCUMENT</span> <span class="o">=</span> <span class="mh">0x00000100</span>
    <span class="n">SHOW_DOCUMENT_TYPE</span> <span class="o">=</span> <span class="mh">0x00000200</span>
    <span class="n">SHOW_DOCUMENT_FRAGMENT</span> <span class="o">=</span> <span class="mh">0x00000400</span>
    <span class="n">SHOW_NOTATION</span> <span class="o">=</span> <span class="mh">0x00000800</span>

    <span class="n">FILTER_ACCEPT</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">FILTER_REJECT</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">FILTER_SKIP</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="c1"># def acceptNode(node):</span>
    <span class="c1"># return NodeFilter.FILTER_ACCEPT</span>
    <span class="c1"># return node</span>

    <span class="c1"># def acceptNode(node):</span>
    <span class="c1"># result</span>
    <span class="c1"># if active:</span>
    <span class="c1">#     raise Exception(&#39;DOMException: INVALID_STATE_ERR&#39;)</span>

    <span class="c1"># active = True</span>
    <span class="c1"># result = filter(node)</span>
    <span class="c1"># active = False</span>

    <span class="c1"># return result</span>


<div class="viewcode-block" id="NodeIterator"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeIterator">[docs]</a><span class="k">class</span> <span class="nc">NodeIterator</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;[NodeIterator is an iterator object that iterates over the descendants of a node, in tree order.]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">whatToShow</span><span class="o">=</span><span class="n">NodeFilter</span><span class="o">.</span><span class="n">SHOW_ALL</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">entityReferenceExpansion</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">whatToShow</span> <span class="o">=</span> <span class="n">whatToShow</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_filter</span> <span class="o">=</span> <span class="nb">filter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entityReferenceExpansion</span> <span class="o">=</span> <span class="n">entityReferenceExpansion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node</span> <span class="o">=</span> <span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filter</span>

    <span class="c1"># def expandEntityReferences(self, expand):</span>
        <span class="c1"># Is a boolean value indicating if,</span>
        <span class="c1"># when discarding an EntityReference its whole sub-tree must be discarded at the same time.</span>

<div class="viewcode-block" id="NodeIterator.referenceNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeIterator.referenceNode">[docs]</a>    <span class="k">def</span> <span class="nf">referenceNode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the Node that is being iterated over. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span></div>

<div class="viewcode-block" id="NodeIterator.pointerBeforeReferenceNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeIterator.pointerBeforeReferenceNode">[docs]</a>    <span class="k">def</span> <span class="nf">pointerBeforeReferenceNode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns a boolean flag that indicates whether the NodeIterator</span>
<span class="sd">        is anchored before, the flag being true,</span>
<span class="sd">        or after, the flag being false, the anchor node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">&lt;</span> <span class="mi">0</span></div>

    <span class="k">def</span> <span class="nf">detach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This operation is a no-op. It doesn&#39;t do anything.</span>
        <span class="c1"># Previously it was telling the engine that the NodeIterator was no more used, but this is now useless.</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="NodeIterator.previousNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeIterator.previousNode">[docs]</a>    <span class="k">def</span> <span class="nf">previousNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the previous Node in the document, or null if there are none. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="NodeIterator.nextNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.NodeIterator.nextNode">[docs]</a>    <span class="k">def</span> <span class="nf">nextNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the next Node in the document, or null if there are none. &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div></div>


<span class="n">mapChild</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;first&quot;</span><span class="p">:</span> <span class="s1">&#39;firstChild&#39;</span><span class="p">,</span>
    <span class="s2">&quot;last&quot;</span><span class="p">:</span> <span class="s1">&#39;lastChild&#39;</span><span class="p">,</span>
    <span class="s2">&quot;next&quot;</span><span class="p">:</span> <span class="s1">&#39;firstChild&#39;</span><span class="p">,</span>
    <span class="s2">&quot;previous&quot;</span><span class="p">:</span> <span class="s1">&#39;lastChild&#39;</span>
<span class="p">}</span>

<span class="n">mapSibling</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;next&quot;</span><span class="p">:</span> <span class="s1">&#39;nextSibling&#39;</span><span class="p">,</span>
    <span class="s2">&quot;previous&quot;</span><span class="p">:</span> <span class="s1">&#39;previousSibling&#39;</span>
<span class="p">}</span>

<span class="c1"># toString = mapChild.toString</span>

<span class="c1"># def _is(x, _type):</span>
<span class="c1">#     print(&#39;!!!!!!!!!!!!!!!!!!! comparing&#39;, x, _type)</span>
<span class="c1">#     return mapChild[x].toLowerCase() == &#39;[object &#39; + _type.toLowerCase() + &#39;]&#39;</span>


<span class="k">def</span> <span class="nf">nodeFilter</span><span class="p">(</span><span class="n">tw</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="c1"># Maps nodeType to whatToShow</span>
    <span class="c1"># print(node, type(node))</span>
    <span class="c1"># if isinstance(node, (str)): #, Text)):</span>
        <span class="c1"># node = Text(node)</span>
        <span class="c1"># return NodeFilter.FILTER_SKIP</span>
        <span class="c1"># return NodeFilter.FILTER_REJECT</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(((</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">nodeType</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&amp;</span> <span class="n">tw</span><span class="o">.</span><span class="n">whatToShow</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_SKIP</span>
    <span class="k">if</span> <span class="n">tw</span><span class="o">.</span><span class="n">_filter</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span>
    <span class="k">return</span> <span class="n">tw</span><span class="o">.</span><span class="n">_filter</span><span class="o">.</span><span class="n">acceptNode</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">str_to_TextNode</span><span class="p">(</span><span class="n">content_str</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content_str</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Text</span><span class="p">(</span><span class="n">content_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">content_str</span>


<span class="k">def</span> <span class="nf">traverseChildren</span><span class="p">(</span><span class="n">tw</span><span class="p">,</span> <span class="n">_type</span><span class="p">):</span>
    <span class="c1"># var child, node, parent, result, sibling</span>
    <span class="c1"># print(&#39;sup&#39;, _type)</span>
    <span class="c1"># print(&#39;mapChild[_type]&#39;, mapChild[_type])</span>
    <span class="n">node</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tw</span><span class="o">.</span><span class="n">currentNode</span><span class="p">,</span> <span class="n">mapChild</span><span class="p">[</span><span class="n">_type</span><span class="p">])</span>  <span class="c1"># TODO - allow dict access to node props?.... tw.currentNode[mapChild[_type]]</span>
    <span class="c1"># print(&#39;flaps&#39;, tw.currentNode.firstChild)</span>
    <span class="c1"># print(&#39;flaps2&#39;, )</span>
    <span class="c1"># print(&#39;tw.currentNode&#39;, tw.currentNode)</span>
    <span class="c1"># print(&#39;MAKE THIS WORK ON NODE:&#39;, tw.currentNode[mapChild[_type]]) #done</span>

    <span class="c1"># node = str_to_TextNode(node)</span>

    <span class="k">while</span> <span class="n">node</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># node = str_to_TextNode(node)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="n">tw</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span><span class="p">:</span>
            <span class="n">tw</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
            <span class="k">return</span> <span class="n">node</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_SKIP</span><span class="p">:</span>
            <span class="n">child</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">mapChild</span><span class="p">[</span><span class="n">_type</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">child</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">child</span>
                <span class="k">continue</span>
        <span class="k">while</span> <span class="n">node</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sibling</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">mapChild</span><span class="p">[</span><span class="n">_type</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">sibling</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">sibling</span>
                <span class="k">break</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parentNode</span>
            <span class="k">if</span> <span class="n">parent</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">parent</span> <span class="o">==</span> <span class="n">tw</span><span class="o">.</span><span class="n">root</span> <span class="ow">or</span> <span class="n">parent</span> <span class="o">==</span> <span class="n">tw</span><span class="o">.</span><span class="n">currentNode</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">parent</span>
    <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span> <span class="nf">traverseSiblings</span><span class="p">(</span><span class="n">tw</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
    <span class="c1"># node, result, sibling</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">tw</span><span class="o">.</span><span class="n">currentNode</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">tw</span><span class="o">.</span><span class="n">root</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">sibling</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">mapSibling</span><span class="p">[</span><span class="nb">type</span><span class="p">])</span>
        <span class="k">while</span> <span class="n">sibling</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">sibling</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="n">tw</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span><span class="p">):</span>
                <span class="n">tw</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
                <span class="k">return</span> <span class="n">node</span>
            <span class="n">sibling</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">mapChild</span><span class="p">[</span><span class="nb">type</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_REJECT</span><span class="p">:</span>
                <span class="n">sibling</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">mapSibling</span><span class="p">[</span><span class="nb">type</span><span class="p">])</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parentNode</span>
        <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">node</span> <span class="o">==</span> <span class="n">tw</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="n">tw</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span> <span class="nf">nextSkippingChildren</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">stayWithin</span><span class="p">):</span>

    <span class="c1"># if isinstance(node, str):</span>
        <span class="c1"># node = Text(node)</span>
        <span class="c1"># return None</span>
    <span class="c1"># TODO - casting is not enough. as the Text node does not know its siblings</span>
    <span class="c1"># print( &quot;nsc&quot;, node, &quot;??&quot;, stayWithin )</span>
    <span class="c1"># print( &quot;AND:&quot;, node.nextSibling )</span>

    <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="n">stayWithin</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">nextSibling</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">nextSibling</span>

    <span class="k">while</span> <span class="n">node</span><span class="o">.</span><span class="n">parentNode</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parentNode</span>
        <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="n">stayWithin</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">nextSibling</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">nextSibling</span>
    <span class="k">return</span> <span class="kc">None</span>


<span class="c1"># https://developer.mozilla.org/en-US/docs/Web/API/TreeWalker</span>
<div class="viewcode-block" id="TreeWalker"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker">[docs]</a><span class="k">class</span> <span class="nc">TreeWalker</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; The TreeWalker object represents the nodes of a document subtree and a position within them. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_upgrade_dom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[</span>
<span class="sd">            Our dom has some strings that are not Text Nodes</span>
<span class="sd">            so we have to upgrade them to Node objects. As we can&#39;t know siblings otherwise</span>
<span class="sd">            # TODO - consider upgrading as they are created.</span>
<span class="sd">        ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">upgrade</span><span class="p">(</span><span class="n">el</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="p">(</span><span class="n">Text</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span>
                <span class="k">return</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">el</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="c1"># print(&#39;doin one&#39;)</span>
                    <span class="n">newchild</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                    <span class="n">el</span><span class="o">.</span><span class="n">replaceChild</span><span class="p">(</span><span class="n">newchild</span><span class="p">,</span> <span class="n">child</span><span class="p">)</span>
                    <span class="n">newchild</span><span class="o">.</span><span class="n">parentNode</span> <span class="o">=</span> <span class="n">el</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">_iterate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="n">upgrade</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">whatToShow</span><span class="o">=</span><span class="n">NodeFilter</span><span class="o">.</span><span class="n">SHOW_ALL</span><span class="p">,</span> <span class="n">_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">expandEntityReferences</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upgrade_dom</span><span class="p">()</span>
        <span class="c1"># print(&quot;test&quot;, type(self._root[0][0]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
        <span class="c1"># TODO - convert whatToShow to a number?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">whatToShow</span> <span class="o">=</span> <span class="n">whatToShow</span>
        <span class="c1"># self.whatToShow = self.whatToShow &amp; 0xFFFFFFFF</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">whatToShow</span> <span class="o">=</span> <span class="n">whatToShow</span> <span class="ow">or</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_filter</span> <span class="o">=</span> <span class="n">_filter</span>

        <span class="k">def</span> <span class="nf">acceptNode</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
            <span class="k">nonlocal</span> <span class="n">_filter</span>
            <span class="c1"># result</span>
            <span class="c1"># if active:</span>
            <span class="c1">#     raise Exception(&#39;DOMException: INVALID_STATE_ERR&#39;)</span>

            <span class="c1"># active = True</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">_filter</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="c1"># active = False</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">NodeFilter</span><span class="o">.</span><span class="n">acceptNode</span> <span class="o">=</span> <span class="n">acceptNode</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">last</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">childIndex</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="sd">&quot;&quot;&quot; Is a boolean value indicating,</span>
<span class="sd">            when discarding an entity reference its whole sub-tree must be discarded at the same time. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expandEntityReferences</span> <span class="o">=</span> <span class="n">expandEntityReferences</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a Node representing the root node as specified when the TreeWalker was created. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span>

<div class="viewcode-block" id="TreeWalker.whatToShow"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker.whatToShow">[docs]</a>    <span class="k">def</span> <span class="nf">whatToShow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns an unsigned long being a bitmask made of constants describing the types of Node that must be presented.</span>
<span class="sd">        Non-matching nodes are skipped, but their children may be included, if relevant. The possible values are: &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">options</span></div>

    <span class="c1"># def filter(self, options):</span>
    <span class="c1">#     &quot;&quot;&quot; Returns a NodeFilter object that can be used to filter the nodes that the TreeWalker visits. &quot;&quot;&quot;</span>
    <span class="c1">#     return options</span>

    <span class="c1"># @property</span>
    <span class="c1"># def currentNode(self):</span>
    <span class="c1">#     &quot;&quot;&quot; Is the Node on which the TreeWalker is currently pointing at. &quot;&quot;&quot;</span>
    <span class="c1">#     return self.currentNode</span>

<div class="viewcode-block" id="TreeWalker.parentNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker.parentNode">[docs]</a>    <span class="k">def</span> <span class="nf">parentNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Moves the current Node to the first visible ancestor node in the document order,</span>
<span class="sd">        and returns the found node. It also moves the current node to this one. If no such node exists,</span>
<span class="sd">        or if it is before that the root node defined at the object construction,</span>
<span class="sd">        returns null and the current node is not changed. &quot;&quot;&quot;</span>
        <span class="c1"># return self.currentNode.parentNode</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span>
        <span class="k">while</span> <span class="n">node</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">node</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parentNode</span>
            <span class="k">if</span> <span class="n">node</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
                <span class="k">return</span> <span class="n">node</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="TreeWalker.firstChild"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker.firstChild">[docs]</a>    <span class="k">def</span> <span class="nf">firstChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Moves the current Node to the first visible child of the current node, and returns the found child.</span>
<span class="sd">        It also moves the current node to this child. If no such child exists,</span>
<span class="sd">        returns null and the current node is not changed. &quot;&quot;&quot;</span>
        <span class="c1"># return self.currentNode.firstChild</span>
        <span class="k">return</span> <span class="n">traverseChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;first&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TreeWalker.lastChild"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker.lastChild">[docs]</a>    <span class="k">def</span> <span class="nf">lastChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Moves the current Node to the last visible child of the current node, and returns the found child.</span>
<span class="sd">        It also moves the current node to this child.</span>
<span class="sd">        If no such child exists, null is returned and the current node is not changed. &quot;&quot;&quot;</span>
        <span class="c1"># return self.currentNode.lastChild</span>
        <span class="k">return</span> <span class="n">traverseChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;last&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TreeWalker.previousSibling"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker.previousSibling">[docs]</a>    <span class="k">def</span> <span class="nf">previousSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Moves the current Node to its previous sibling, if any, and returns the found sibling.</span>
<span class="sd">        If there is no such node, return null and the current node is not changed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># return self.previous</span>
        <span class="k">return</span> <span class="n">traverseSiblings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;previous&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TreeWalker.nextSibling"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker.nextSibling">[docs]</a>    <span class="k">def</span> <span class="nf">nextSibling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Moves the current Node to its next sibling, if any, and returns the found sibling.</span>
<span class="sd">        If there is no such node, null is returned and the current node is not changed. &quot;&quot;&quot;</span>
        <span class="c1"># return self.currentNode.nextSibling</span>
        <span class="k">return</span> <span class="n">traverseSiblings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;next&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TreeWalker.previousNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker.previousNode">[docs]</a>    <span class="k">def</span> <span class="nf">previousNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Moves the current Node to the previous visible node in the document order,</span>
<span class="sd">        and returns the found node. It also moves the current node to this one.</span>
<span class="sd">        If no such node exists, or if it is before that the root node defined at the object construction,</span>
<span class="sd">        returns null and the current node is not changed. &quot;&quot;&quot;</span>
        <span class="c1"># return self.previous</span>
        <span class="c1"># raise NotImplementedError()</span>
        <span class="c1"># var node, result, sibling</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">node</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">):</span>
            <span class="n">sibling</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">previousSibling</span>
            <span class="k">while</span> <span class="n">sibling</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">sibling</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
                <span class="k">while</span> <span class="n">result</span> <span class="o">!=</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_REJECT</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">lastChild</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">lastChild</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
                    <span class="k">return</span> <span class="n">node</span>
            <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">parentNode</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parentNode</span>
            <span class="k">if</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
                <span class="k">return</span> <span class="n">node</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="TreeWalker.nextNode"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.TreeWalker.nextNode">[docs]</a>    <span class="k">def</span> <span class="nf">nextNode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Moves the current Node to the next visible node in the document order, and returns the found node.</span>
<span class="sd">        It also moves the current node to this one.</span>
<span class="sd">        If no such node exists, returns None and the current node is not changed.</span>
<span class="sd">        can be used in a while loop to iterate over all the nodes in the document order.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># var node, result, following;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="c1"># return node</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># print(&#39;rrr:::&#39;, result, node)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">Text</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                <span class="c1"># continue</span>

            <span class="k">while</span> <span class="n">result</span> <span class="o">!=</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_REJECT</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">firstChild</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># print(&#39;rrr222:::&#39;, result, node)</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">firstChild</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                    <span class="c1"># result = NodeFilter.FILTER_REJECT</span>
                    <span class="c1"># continue</span>
                    <span class="c1"># break</span>
                    <span class="c1"># return None</span>

                <span class="n">result</span> <span class="o">=</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
                    <span class="k">return</span> <span class="n">node</span>
            <span class="n">following</span> <span class="o">=</span> <span class="n">nextSkippingChildren</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">following</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">following</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># print(&#39;NONE&#39;)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">nodeFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">NodeFilter</span><span class="o">.</span><span class="n">FILTER_ACCEPT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentNode</span> <span class="o">=</span> <span class="n">node</span>
                <span class="k">return</span> <span class="n">node</span></div></div>


<span class="c1"># TODO - create fetch package and move the js fetch stuff to it?</span>
<span class="c1"># fetch api</span>

<span class="c1"># AbortController</span>
<span class="c1"># AbortSignal</span>
<span class="c1"># Cache</span>
<span class="c1"># CacheStorage</span>
<span class="c1"># ContentIndex</span>
<span class="c1"># ContactPicker</span>
<span class="c1"># Client - serviceworker api</span>
<span class="c1"># CredentialsContainer - new login api</span>
<span class="c1"># DOMMatrix #https://developer.mozilla.org/en-US/docs/Web/API/DOMMatrix</span>
<span class="c1"># DOMParser</span>
<span class="c1"># IndexedDB API</span>
<span class="c1"># ImageBitmap</span>
<span class="c1"># ImageBitmapRenderingContext</span>
<span class="c1"># ImageData</span>
<span class="c1"># MutationObserver</span>
<span class="c1"># MutationRecord</span>
<span class="c1"># OverconstrainedError</span>
<span class="c1"># QueueingStrategy</span>
<span class="c1"># ReadableStream</span>
<span class="c1"># SCTP</span>
<span class="c1"># SourceBuffer</span>
<span class="c1"># SourceBufferAppendMode</span>
<span class="c1"># SourceBufferAppendWindowEnd</span>
<span class="c1"># TimeRanges - media</span>
<span class="c1"># TrackEvent - media</span>
<span class="c1"># ValidityState</span>
<span class="c1"># Web Share API</span>
<span class="c1"># WebGL</span>
<span class="c1"># also</span>
<span class="c1"># https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API</span>

<span class="c1"># HTMLElementTagNameMap &lt; how many of these types are there?</span>

<span class="c1"># XMLSerializer = xml.dom.minidom.XMLSerializer?</span>
<span class="c1"># XMLSerializer.serializeToString(rootNode)</span>

<span class="k">class</span> <span class="nc">Sanitizer</span><span class="p">():</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rules</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creates and returns a Sanitizer object.&quot;&quot;&quot;</span>

        <span class="c1"># casting as object gives us . notation</span>
        <span class="kn">from</span> <span class="nn">domonic.javascript</span> <span class="kn">import</span> <span class="n">Object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_configuration</span> <span class="o">=</span> <span class="n">Object</span><span class="p">({</span>
        <span class="s2">&quot;allowCustomElements&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="c1">#&quot;allowElements&quot;: [],  # elements that the sanitizer should retain in the input.</span>
        <span class="s2">&quot;blockElements&quot;</span><span class="p">:</span> <span class="p">[],</span>  <span class="c1"># elements where the sanitizer should remove the elements from the input, but retain their children.</span>
        <span class="s2">&quot;dropElements&quot;</span><span class="p">:</span> <span class="p">[],</span>  <span class="c1"># elements that the sanitizer should remove from the input, including its children.</span>
        <span class="c1">#&quot;allowAttributes&quot;: [],  # determines whether an attribute (on a given element) should be allowed.</span>
        <span class="s2">&quot;dropAttributes&quot;</span><span class="p">:</span> <span class="p">[],</span>  <span class="c1"># determines whether an attribute (on a given element) should be dropped.</span>
        <span class="s2">&quot;allowCustomElements&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># determines whether custom elements are to be considered. The default is to drop them. If this option is true, custom elements will still be checked against all other built-in or configured configured checks.</span>
        <span class="s2">&quot;allowComments&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># determines whether HTML comments are allowed.</span>
        <span class="s2">&quot;allowElements&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;abbr&quot;</span><span class="p">,</span> <span class="s2">&quot;acronym&quot;</span><span class="p">,</span> <span class="s2">&quot;address&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;article&quot;</span><span class="p">,</span> <span class="s2">&quot;aside&quot;</span><span class="p">,</span> <span class="s2">&quot;audio&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;bdi&quot;</span><span class="p">,</span> <span class="s2">&quot;bdo&quot;</span><span class="p">,</span> <span class="s2">&quot;bgsound&quot;</span><span class="p">,</span>
        <span class="s2">&quot;big&quot;</span><span class="p">,</span> <span class="s2">&quot;blockquote&quot;</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">,</span> <span class="s2">&quot;br&quot;</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span><span class="p">,</span> <span class="s2">&quot;canvas&quot;</span><span class="p">,</span> <span class="s2">&quot;caption&quot;</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="s2">&quot;cite&quot;</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;col&quot;</span><span class="p">,</span> <span class="s2">&quot;colgroup&quot;</span><span class="p">,</span> <span class="s2">&quot;datalist&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;del&quot;</span><span class="p">,</span> <span class="s2">&quot;details&quot;</span><span class="p">,</span> <span class="s2">&quot;dfn&quot;</span><span class="p">,</span> <span class="s2">&quot;dialog&quot;</span><span class="p">,</span> <span class="s2">&quot;dir&quot;</span><span class="p">,</span> <span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="s2">&quot;dl&quot;</span><span class="p">,</span> <span class="s2">&quot;dt&quot;</span><span class="p">,</span> <span class="s2">&quot;em&quot;</span><span class="p">,</span> <span class="s2">&quot;fieldset&quot;</span><span class="p">,</span> <span class="s2">&quot;figcaption&quot;</span><span class="p">,</span> <span class="s2">&quot;figure&quot;</span><span class="p">,</span> <span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="s2">&quot;footer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;form&quot;</span><span class="p">,</span> <span class="s2">&quot;h1&quot;</span><span class="p">,</span> <span class="s2">&quot;h2&quot;</span><span class="p">,</span> <span class="s2">&quot;h3&quot;</span><span class="p">,</span> <span class="s2">&quot;h4&quot;</span><span class="p">,</span> <span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="s2">&quot;h6&quot;</span><span class="p">,</span> <span class="s2">&quot;head&quot;</span><span class="p">,</span> <span class="s2">&quot;header&quot;</span><span class="p">,</span> <span class="s2">&quot;hgroup&quot;</span><span class="p">,</span> <span class="s2">&quot;hr&quot;</span><span class="p">,</span> <span class="s2">&quot;html&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;img&quot;</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="s2">&quot;ins&quot;</span><span class="p">,</span> <span class="s2">&quot;kbd&quot;</span><span class="p">,</span> <span class="s2">&quot;keygen&quot;</span><span class="p">,</span>
        <span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;layer&quot;</span><span class="p">,</span> <span class="s2">&quot;legend&quot;</span><span class="p">,</span> <span class="s2">&quot;li&quot;</span><span class="p">,</span> <span class="s2">&quot;link&quot;</span><span class="p">,</span> <span class="s2">&quot;listing&quot;</span><span class="p">,</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span> <span class="s2">&quot;map&quot;</span><span class="p">,</span> <span class="s2">&quot;mark&quot;</span><span class="p">,</span> <span class="s2">&quot;marquee&quot;</span><span class="p">,</span> <span class="s2">&quot;menu&quot;</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="s2">&quot;meter&quot;</span><span class="p">,</span> <span class="s2">&quot;nav&quot;</span><span class="p">,</span> <span class="s2">&quot;nobr&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ol&quot;</span><span class="p">,</span> <span class="s2">&quot;optgroup&quot;</span><span class="p">,</span> <span class="s2">&quot;option&quot;</span><span class="p">,</span> <span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;picture&quot;</span><span class="p">,</span> <span class="s2">&quot;popup&quot;</span><span class="p">,</span> <span class="s2">&quot;pre&quot;</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">,</span> <span class="s2">&quot;rp&quot;</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">,</span> <span class="s2">&quot;rtc&quot;</span><span class="p">,</span> <span class="s2">&quot;ruby&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">,</span>
        <span class="s2">&quot;samp&quot;</span><span class="p">,</span> <span class="s2">&quot;section&quot;</span><span class="p">,</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="s2">&quot;selectmenu&quot;</span><span class="p">,</span> <span class="s2">&quot;small&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="s2">&quot;strike&quot;</span><span class="p">,</span> <span class="s2">&quot;strong&quot;</span><span class="p">,</span> <span class="s2">&quot;style&quot;</span><span class="p">,</span> <span class="s2">&quot;sub&quot;</span><span class="p">,</span> <span class="s2">&quot;summary&quot;</span><span class="p">,</span> <span class="s2">&quot;sup&quot;</span><span class="p">,</span>
        <span class="s2">&quot;table&quot;</span><span class="p">,</span> <span class="s2">&quot;tbody&quot;</span><span class="p">,</span> <span class="s2">&quot;td&quot;</span><span class="p">,</span> <span class="s2">&quot;tfoot&quot;</span><span class="p">,</span> <span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="s2">&quot;thead&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;tr&quot;</span><span class="p">,</span> <span class="s2">&quot;track&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="s2">&quot;ul&quot;</span><span class="p">,</span> <span class="s2">&quot;var&quot;</span><span class="p">,</span> <span class="s2">&quot;video&quot;</span><span class="p">,</span> <span class="s2">&quot;wbr&quot;</span><span class="p">],</span>
        <span class="s2">&quot;allowAttributes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;abbr&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;accept&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;accept-charset&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;accesskey&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;align&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;alink&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;allow&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;allowfullscreen&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;alt&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;anchor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;archive&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;as&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;async&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;autocapitalize&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;autocomplete&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;autocorrect&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;autofocus&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;autopictureinpicture&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;autoplay&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;axis&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;background&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;behavior&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;bgcolor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;border&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;bordercolor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;capture&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;cellpadding&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;cellspacing&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;challenge&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;char&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;charoff&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;charset&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;checked&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;cite&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;classid&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;clear&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;codebase&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;codetype&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;cols&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;colspan&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;compact&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;contenteditable&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;controls&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;controlslist&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;conversiondestination&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;coords&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;crossorigin&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;csp&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;datetime&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;declare&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;decoding&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;defer&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;dir&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;dirname&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;disabled&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;disablepictureinpicture&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;disableremoteplayback&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;disallowdocumentaccess&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;download&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;draggable&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;elementtiming&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;enctype&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;enterkeyhint&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;exportparts&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;face&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;for&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;form&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;formaction&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;formenctype&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;formmethod&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;formnovalidate&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;formtarget&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;frame&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;frameborder&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;hidden&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;href&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;hreflang&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;hreftranslate&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;hspace&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;http-equiv&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;imagesizes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;imagesrcset&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;importance&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;impressiondata&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;impressionexpiry&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;incremental&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;inert&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;inputmode&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;integrity&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;invisible&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;is&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;ismap&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;keytype&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;kind&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;latencyhint&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;leftmargin&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;link&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;loading&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;longdesc&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;loop&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;lowsrc&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;manifest&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;marginheight&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;marginwidth&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;maxlength&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;mayscript&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;media&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;minlength&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;multiple&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;muted&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;nohref&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;nomodule&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;nonce&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;noresize&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;noshade&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;novalidate&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;nowrap&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;optimum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;part&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;ping&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;placeholder&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;playsinline&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;policy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;poster&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;preload&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;pseudo&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;readonly&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;referrerpolicy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;rel&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;reportingorigin&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;rev&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;reversed&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;rows&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;rowspan&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;sandbox&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;scheme&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;scopes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;scrollamount&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;scrolldelay&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;scrolling&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;select&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;selected&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;shadowroot&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;shadowrootdelegatesfocus&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;sizes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;slot&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;span&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;spellcheck&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;src&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;srcdoc&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;srclang&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;srcset&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;standby&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;summary&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;tabindex&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;topmargin&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;translate&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;truespeed&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;trusttoken&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;usemap&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;valign&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;valuetype&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;virtualkeyboardpolicy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;vlink&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;vspace&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;webkitdirectory&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="s2">&quot;wrap&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rules</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rules</span> <span class="o">=</span> <span class="n">rules</span>
            <span class="c1"># create a new configuration which is a copy of the default but change it based on the rules object</span>
            <span class="kn">import</span> <span class="nn">copy</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_configuration</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># print(&#39;ADDING RULES&#39;, key, value)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rules</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_configuration</span>

    <span class="k">def</span> <span class="nf">getDefaultConfiguration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_configuration</span>

    <span class="k">def</span> <span class="nf">getConfiguration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;[return the configuration object]</span>

<span class="sd">        Returns:</span>
<span class="sd">            [Object]: [an Object with the users configuration]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>

    <span class="k">def</span> <span class="nf">sanitize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frag</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a sanitized DocumentFragment from an input, removing any offending elements or attributes. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frag</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c1"># parse to html then remove all the bad stuff?? - is a really bad idea. as it goes through eval.</span>
            <span class="kn">from</span> <span class="nn">domonic</span> <span class="kn">import</span> <span class="n">domonic</span>
            <span class="n">frag</span> <span class="o">=</span> <span class="n">domonic</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">frag</span><span class="p">)</span>

        <span class="n">isDomNode</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frag</span><span class="p">,</span> <span class="n">Document</span><span class="p">):</span>
            <span class="n">isDomNode</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">isDomNode</span><span class="p">:</span>
            <span class="n">newfrag</span> <span class="o">=</span> <span class="n">Document</span><span class="o">.</span><span class="n">createDocumentFragment</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frag</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">frag</span><span class="p">:</span>
                    <span class="n">newfrag</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newfrag</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">frag</span><span class="p">)</span>
            <span class="n">frag</span> <span class="o">=</span> <span class="n">newfrag</span>

        <span class="c1"># TODO &quot;allowCustomElements&quot;: # &quot;allowElements&quot;: [], # &quot;blockElements&quot;: [], # &quot;dropElements&quot;: [],  # &quot;allowAttributes&quot;: [],</span>
        <span class="c1"># TODO &quot;dropAttributes&quot;: # &quot;allowCustomElements&quot;: # &quot;allowComments&quot;: # &quot;allowElements&quot; # allowAttributes</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;dropElements&quot;</span><span class="p">]:</span>
            <span class="n">el</span> <span class="o">=</span> <span class="n">frag</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="n">el</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;dropAttributes&quot;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;allowElements&quot;</span><span class="p">]:</span>
                <span class="n">els</span> <span class="o">=</span> <span class="n">frag</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">els</span> <span class="o">!=</span> <span class="kc">False</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">els</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">els</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">each</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">t</span><span class="p">:</span>
                                <span class="n">el</span><span class="o">.</span><span class="n">removeAttribute</span><span class="p">(</span><span class="n">each</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># print(&quot;test&quot; frag.querySelectorAll(&#39;span&#39;))</span>
        <span class="c1"># print(&quot;test2&quot;, frag.getElementsByTagName(&#39;span&#39;))</span>

        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;allowElements&quot;</span><span class="p">]:</span>
            <span class="n">els</span> <span class="o">=</span> <span class="n">frag</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">els</span> <span class="o">!=</span> <span class="kc">False</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">els</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">els</span><span class="p">:</span>
                    <span class="c1"># print(el.kwargs, el.attributes, el.__attributes__, type(el.attributes))</span>
                    <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">attributes</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="n">each</span><span class="o">.</span><span class="n">name</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">each</span><span class="o">.</span><span class="n">value</span>
                        <span class="c1"># print(key, val)</span>
                        <span class="n">allowed_on</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;allowAttributes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                        <span class="c1"># print(&quot;ALLOWED ON:&quot;, key, allowed_on)</span>
                        <span class="k">if</span> <span class="n">allowed_on</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">el</span><span class="o">.</span><span class="n">removeAttribute</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                            <span class="k">continue</span>
                        <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">allowed_on</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="k">if</span> <span class="n">e</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_on</span><span class="p">:</span>
                            <span class="n">el</span><span class="o">.</span><span class="n">removeAttribute</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                        <span class="c1"># else:</span>
                        <span class="c1">#     print(key + &#39; is allowed&#39;)</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;blockElements&quot;</span><span class="p">]:</span>
            <span class="n">el</span> <span class="o">=</span> <span class="n">frag</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
            <span class="c1"># keep the children of the element and add them back to the parent</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">childNodes</span><span class="p">:</span>
                <span class="n">frag</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="c1"># remove the element</span>
            <span class="n">frag</span><span class="o">.</span><span class="n">parentNode</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>

        <span class="c1"># print(type(frag))</span>
        <span class="k">return</span> <span class="n">frag</span>

    <span class="k">def</span> <span class="nf">sanitizeToString</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frag</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns a sanitized String from an input, removing any offending elements or attributes. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sanitize</span><span class="p">(</span><span class="n">frag</span><span class="p">))</span>


<div class="viewcode-block" id="HTMLElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLElement</span><span class="p">(</span><span class="n">Element</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLAnchorElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLAnchorElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLAnchorElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLAreaElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLAreaElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLAreaElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLAudioElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLAudioElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLAudioElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLBRElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLBRElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLBRElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLBaseElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLBaseElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLBaseElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>
    
<div class="viewcode-block" id="HTMLBaseFontElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLBaseFontElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLBaseFontElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLBodyElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLBodyElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLBodyElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLButtonElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLButtonElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLButtonElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLCanvasElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLCanvasElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLCanvasElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLContentElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLContentElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLContentElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLDListElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLDListElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLDListElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLDataElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLDataElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLDataElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLDataListElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLDataListElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLDataListElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLDialogElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLDialogElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLDialogElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLDivElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLDivElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLDivElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLDocument"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLDocument">[docs]</a><span class="k">class</span> <span class="nc">HTMLDocument</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="HTMLEmbedElement"><a class="viewcode-back" href="../../packages/dom.html#domonic.dom.HTMLEmbedElement">[docs]</a><span class="k">class</span> <span class="nc">HTMLEmbedElement</span><span class="p">(</span><span class="n">HTMLElement</span><span class="p">):</span>
    <span class="k">pass</span></div>

<span class="c1"># HTMLFieldSetElement</span>
<span class="c1"># HTMLFormControlsCollection</span>
<span class="c1"># HTMLFormElement</span>
<span class="c1"># HTMLFrameSetElement</span>
<span class="c1"># HTMLHRElement</span>
<span class="c1"># HTMLHeadElement</span>
<span class="c1"># HTMLHeadingElement</span>
<span class="c1"># HTMLIFrameElement</span>
<span class="c1"># HTMLImageElement</span>
<span class="c1"># HTMLInputElement</span>
<span class="c1"># HTMLIsIndexElement</span>
<span class="c1"># HTMLKeygenElement</span>
<span class="c1"># HTMLLIElement</span>
<span class="c1"># HTMLLabelElement</span>
<span class="c1"># HTMLLegendElement</span>
<span class="c1"># HTMLLinkElement</span>
<span class="c1"># HTMLMapElement</span>
<span class="c1"># HTMLMediaElement</span>
<span class="c1"># HTMLMetaElement</span>
<span class="c1"># HTMLMeterElement</span>
<span class="c1"># HTMLModElement</span>
<span class="c1"># HTMLOListElement</span>
<span class="c1"># HTMLObjectElement</span>
<span class="c1"># HTMLOptGroupElement</span>
<span class="c1"># HTMLOptionElement</span>
<span class="c1"># HTMLOptionsCollection</span>
<span class="c1"># HTMLOutputElement</span>
<span class="c1"># HTMLParagraphElement</span>
<span class="c1"># HTMLParamElement</span>
<span class="c1"># HTMLPictureElement</span>
<span class="c1"># HTMLPreElement</span>
<span class="c1"># HTMLProgressElement</span>
<span class="c1"># HTMLQuoteElement</span>
<span class="c1"># HTMLScriptElement</span>
<span class="c1"># HTMLSelectElement</span>
<span class="c1"># HTMLShadowElement</span>
<span class="c1"># HTMLSourceElement</span>
<span class="c1"># HTMLSpanElement</span>
<span class="c1"># HTMLStyleElement</span>
<span class="c1"># HTMLTableCaptionElement</span>
<span class="c1"># HTMLTableCellElement</span>
<span class="c1"># HTMLTableColElement</span>
<span class="c1"># HTMLTableDataCellElement</span>
<span class="c1"># HTMLTableElement</span>
<span class="c1"># HTMLTableHeaderCellElement</span>
<span class="c1"># HTMLTableRowElement</span>
<span class="c1"># HTMLTableSectionElement</span>
<span class="c1"># HTMLTemplateElement</span>
<span class="c1"># HTMLTextAreaElement</span>
<span class="c1"># HTMLTimeElement</span>
<span class="c1"># HTMLTitleElement</span>
<span class="c1"># HTMLTrackElement</span>
<span class="c1"># HTMLUListElement</span>
<span class="c1"># HTMLUnknownElement</span>
<span class="c1"># HTMLVideoElement</span>


<span class="c1"># document can be set manually but will get set each time a new Document is created.</span>
<span class="k">global</span> <span class="n">document</span>
<span class="n">document</span> <span class="o">=</span> <span class="n">Document</span>
<span class="n">console</span> <span class="o">=</span> <span class="n">Console</span>  <span class="c1"># legacy. should access via window</span>


<span class="c1"># Considered obsolete dom classes ----</span>
<span class="c1"># DOMConfiguration</span>
<span class="c1"># DOMErrorHandler</span>
<span class="c1"># DOMImplementationList</span>
<span class="c1"># DOMImplementationRegistry</span>
<span class="c1"># DOMImplementationSource</span>
<span class="c1"># DOMLocator</span>
<span class="c1"># DOMObject</span>
<span class="c1"># DOMSettableTokenList</span>
<span class="c1"># DOMUserData</span>
<span class="c1"># ElementTraversal</span>
<span class="c1"># Entity</span>
<span class="c1"># EntityReference</span>
<span class="c1"># NameList</span>
<span class="c1"># Notation</span>
<span class="c1"># TypeInfo</span>
<span class="c1"># UserDataHandler</span>


<span class="sd">&#39;&#39;&#39;</span>
<span class="sd"># self.screen = type(&#39;screen&#39;, (DOM,), {&#39;name&#39;:&#39;screen&#39;})</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><span style="font-size: 150px;">ñ§ê</span>
<h1 class="logo"><a href="https://domonic.readthedocs.io/">domonic</a></h1>
<p>
  <iframe src="https://ghbtns.com/github-btn.html?user=byteface&amp;repo=domonic&amp;type=star&amp;count=true&amp;size=large&amp;v=2" allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>
<p>
  domonic is a library to generate HTML with python 3. There's an evolving DOM API, JavaScript API and many other cool features. Can be used as a fast prototyping tool.
</p>

<h3>Links</h3>
<ul>
  <li><a href="https://pypi.org/project/domonic/">PyPI Releases</a></li>
  <li><a href="https://github.com/byteface/domonic/">Source Code</a></li>
</ul>
<h3><a href="../../index.html">Table of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../packages/html.html">html</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/dom.html">dom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/javascript.html">javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/events.html">events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/sitemap.html">sitemap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/dQuery.html">dQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/d3.html">d3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/JSON.html">JSON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/constants.html">constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/terminal.html">terminal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/cmd.html">cmd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/tween.html">tween</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/geom.html">geom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/x3d.html">x3d</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/CDN.html">CDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/decorators.html">decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/components.html">Templates and Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/utils.html">utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/webapi.html">webapi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/style.html">styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/servers.html">üöÄ servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packages/autodocs.html">ü§ñ autodocs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contribute</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, byteface.
      
    </div>

    
    <a href="https://github.com/byteface/domonic" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>